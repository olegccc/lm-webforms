/**
 * @license
 * lodash 3.9.3 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -o ./lodash.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */

/*!
 * Autolinker.js
 * 0.18.1
 *
 * Copyright(c) 2015 Gregory Jacobs <greg@greg-jacobs.com>
 * MIT Licensed. http://www.opensource.org/licenses/mit-license.php
 *
 * https://github.com/gregjacobs/Autolinker.js
 */

(function(){function Dt(t,n){if(t!==n){var r=t===null,i=t===e,s=t===t,o=n===null,u=n===e,a=n===n;if(t>n&&!o||!s||r&&!u&&a||i&&a)return 1;if(t<n&&!r||!a||o&&!i&&s||u&&s)return-1}return 0}function Pt(e,t,n){var r=e.length,i=n?r:-1;while(n?i--:++i<r)if(t(e[i],i,e))return i;return-1}function Ht(e,t,n){if(t!==t)return Xt(e,n);var r=n-1,i=e.length;while(++r<i)if(e[r]===t)return r;return-1}function Bt(e){return typeof e=="function"||!1}function jt(e){return typeof e=="string"?e:e==null?"":e+""}function Ft(e,t){var n=-1,r=e.length;while(++n<r&&t.indexOf(e.charAt(n))>-1);return n}function It(e,t){var n=e.length;while(n--&&t.indexOf(e.charAt(n))>-1);return n}function qt(e,t){return Dt(e.criteria,t.criteria)||e.index-t.index}function Rt(e,t,n){var r=-1,i=e.criteria,s=t.criteria,o=i.length,u=n.length;while(++r<o){var a=Dt(i[r],s[r]);if(a)return r>=u?a:a*(n[r]?1:-1)}return e.index-t.index}function Ut(e){return Et[e]}function zt(e){return St[e]}function Wt(e){return"\\"+Nt[e]}function Xt(e,t,n){var r=e.length,i=t+(n?0:-1);while(n?i--:++i<r){var s=e[i];if(s!==s)return i}return-1}function Vt(e){return!!e&&typeof e=="object"}function $t(e){return e<=160&&e>=9&&e<=13||e==32||e==160||e==5760||e==6158||e>=8192&&(e<=8202||e==8232||e==8233||e==8239||e==8287||e==12288||e==65279)}function Jt(e,t){var n=-1,r=e.length,i=-1,s=[];while(++n<r)e[n]===t&&(e[n]=b,s[++i]=n);return s}function Kt(e,t){var n,r=-1,i=e.length,s=-1,o=[];while(++r<i){var u=e[r],a=t?t(u,r,e):u;if(!r||n!==a)n=a,o[++s]=u}return o}function Qt(e){var t=-1,n=e.length;while(++t<n&&$t(e.charCodeAt(t)));return t}function Gt(e){var t=e.length;while(t--&&$t(e.charCodeAt(t)));return t}function Yt(e){return xt[e]}function Zt(C){function Rn(e){if(Vt(e)&&!mu(e)&&!(e instanceof Xn)){if(e instanceof zn)return e;if(nn.call(e,"__chain__")&&nn.call(e,"__wrapped__"))return bs(e)}return new zn(e)}function Un(){}function zn(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function Xn(e){this.__wrapped__=e,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Dn,this.__views__=null}function Vn(){var e=this.__actions__,t=this.__iteratees__,n=this.__views__,r=new Xn(this.__wrapped__);return r.__actions__=e?rr(e):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=t?rr(t):null,r.__takeCount__=this.__takeCount__,r.__views__=n?rr(n):null,r}function $n(){if(this.__filtered__){var e=new Xn(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Jn(){var e=this.__wrapped__.value();if(!mu(e))return ai(e,this.__actions__);var t=this.__dir__,n=t<0,r=Gi(0,e.length,this.__views__),i=r.start,s=r.end,o=s-i,u=n?s:i-1,a=kn(o,this.__takeCount__),f=this.__iteratees__,l=f?f.length:0,c=0,h=[];e:while(o--&&c<a){u+=t;var p=-1,d=e[u];while(++p<l){var y=f[p],b=y.iteratee,w=y.type;if(w==v){y.done&&(n?u>y.index:u<y.index)&&(y.count=0,y.done=!1),y.index=u;if(!y.done){var E=y.limit;if(!(y.done=E>-1?y.count++>=E:!b(d)))continue e}}else{var S=b(d);if(w==g)d=S;else if(!S){if(w==m)continue e;break e}}}h[c++]=d}return h}function Kn(){this.__data__={}}function Qn(e){return this.has(e)&&delete this.__data__[e]}function Gn(t){return t=="__proto__"?e:this.__data__[t]}function Yn(e){return e!="__proto__"&&nn.call(this.__data__,e)}function Zn(e,t){return e!="__proto__"&&(this.__data__[e]=t),this}function er(e){var t=e?e.length:0;this.data={hash:Sn(null),set:new mn};while(t--)this.push(e[t])}function tr(e,t){var n=e.data,r=typeof t=="string"||Nu(t)?n.set.has(t):n.hash[t];return r?0:-1}function nr(e){var t=this.data;typeof e=="string"||Nu(e)?t.set.add(e):t.hash[e]=!0}function rr(e,t){var n=-1,r=e.length;t||(t=O(r));while(++n<r)t[n]=e[n];return t}function ir(e,t){var n=-1,r=e.length;while(++n<r)if(t(e[n],n,e)===!1)break;return e}function sr(e,t){var n=e.length;while(n--)if(t(e[n],n,e)===!1)break;return e}function or(e,t){var n=-1,r=e.length;while(++n<r)if(!t(e[n],n,e))return!1;return!0}function ur(e,t,n,r){var i=-1,s=e.length,o=r,u=o;while(++i<s){var a=e[i],f=+t(a);n(f,o)&&(o=f,u=a)}return u}function ar(e,t){var n=-1,r=e.length,i=-1,s=[];while(++n<r){var o=e[n];t(o,n,e)&&(s[++i]=o)}return s}function fr(e,t){var n=-1,r=e.length,i=O(r);while(++n<r)i[n]=t(e[n],n,e);return i}function lr(e,t,n,r){var i=-1,s=e.length;r&&s&&(n=e[++i]);while(++i<s)n=t(n,e[i],i,e);return n}function cr(e,t,n,r){var i=e.length;r&&i&&(n=e[--i]);while(i--)n=t(n,e[i],i,e);return n}function hr(e,t){var n=-1,r=e.length;while(++n<r)if(t(e[n],n,e))return!0;return!1}function pr(e){var t=e.length,n=0;while(t--)n+=+e[t]||0;return n}function dr(t,n){return t===e?n:t}function vr(t,n,r,i){return t===e||!nn.call(i,r)?n:t}function mr(t,n,r){var i=-1,s=Zu(n),o=s.length;while(++i<o){var u=s[i],a=t[u],f=r(a,n[u],u,t,n);if((f===f?f!==a:a===a)||a===e&&!(u in t))t[u]=f}return t}function gr(e,t){return t==null?e:br(t,Zu(t),e)}function yr(t,n){var r=-1,i=t==null,s=!i&&ns(t),o=s?t.length:0,u=n.length,a=O(u);while(++r<u){var f=n[r];s?a[r]=rs(f,o)?t[f]:e:a[r]=i?e:t[f]}return a}function br(e,t,n){n||(n={});var r=-1,i=t.length;while(++r<i){var s=t[r];n[s]=e[s]}return n}function wr(t,n,r){var i=typeof t;return i=="function"?n===e?t:ci(t,n,r):t==null?Ia:i=="object"?Wr(t):n===e?$a(t):Xr(t,n)}function Er(t,n,r,i,s,o,u){var a;r&&(a=s?r(t,i,s):r(t));if(a!==e)return a;if(!Nu(t))return t;var f=mu(t);if(f){a=Yi(t);if(!n)return rr(t,a)}else{var l=sn.call(t),c=l==N;if(!(l==L||l==w||c&&!s))return bt[l]?es(t,l,n):s?t:{};a=Zi(c?{}:t);if(!n)return gr(a,t)}o||(o=[]),u||(u=[]);var h=o.length;while(h--)if(o[h]==t)return u[h];return o.push(t),u.push(a),(f?ir:Br)(t,function(e,i){a[i]=Er(e,n,r,i,t,o,u)}),a}function xr(t,n,r){if(typeof t!="function")throw new Lt(y);return gn(function(){t.apply(e,r)},n)}function Tr(e,t){var n=e?e.length:0,r=[];if(!n)return r;var i=-1,s=$i(),o=s==Ht,u=o&&t.length>=200?wi(t):null,a=t.length;u&&(s=tr,o=!1,t=u);e:while(++i<n){var f=e[i];if(o&&f===f){var l=a;while(l--)if(t[l]===f)continue e;r.push(f)}else s(t,f,0)<0&&r.push(f)}return r}function kr(e,t){var n=!0;return Nr(e,function(e,r,i){return n=!!t(e,r,i),n}),n}function Lr(e,t,n,r){var i=r,s=i;return Nr(e,function(e,o,u){var a=+t(e,o,u);if(n(a,i)||a===r&&a===s)i=a,s=e}),s}function Ar(t,n,r,i){var s=t.length;r=r==null?0:+r||0,r<0&&(r=-r>s?0:s+r),i=i===e||i>s?s:+i||0,i<0&&(i+=s),s=r>i?0:i>>>0,r>>>=0;while(r<s)t[r++]=n;return t}function Or(e,t){var n=[];return Nr(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Mr(e,t,n,r){var i;return n(e,function(e,n,s){if(t(e,n,s))return i=r?n:e,!1}),i}function _r(e,t,n){var r=-1,i=e.length,s=-1,o=[];while(++r<i){var u=e[r];if(Vt(u)&&ns(u)&&(n||mu(u)||vu(u))){t&&(u=_r(u,t,n));var a=-1,f=u.length;while(++a<f)o[++s]=u[a]}else n||(o[++s]=u)}return o}function Hr(e,t){return Dr(e,t,ea)}function Br(e,t){return Dr(e,t,Zu)}function jr(e,t){return Pr(e,t,Zu)}function Fr(e,t){var n=-1,r=t.length,i=-1,s=[];while(++n<r){var o=t[n];Tu(e[o])&&(s[++i]=o)}return s}function Ir(t,n,r){if(t==null)return;r!==e&&r in gs(t)&&(n=[r]);var i=0,s=n.length;while(t!=null&&i<s)t=t[n[i++]];return i&&i==s?t:e}function qr(e,t,n,r,i,s){return e===t?!0:e==null||t==null||!Nu(e)&&!Vt(t)?e!==e&&t!==t:Rr(e,t,qr,n,r,i,s)}function Rr(e,t,n,r,i,s,o){var u=mu(e),a=mu(t),f=E,l=E;u||(f=sn.call(e),f==w?f=L:f!=L&&(u=Pu(e))),a||(l=sn.call(t),l==w?l=L:l!=L&&(a=Pu(t)));var c=f==L,h=l==L,p=f==l;if(p&&!u&&!c)return Ui(e,t,f);if(!i){var d=c&&nn.call(e,"__wrapped__"),v=h&&nn.call(t,"__wrapped__");if(d||v)return n(d?e.value():e,v?t.value():t,r,i,s,o)}if(!p)return!1;s||(s=[]),o||(o=[]);var m=s.length;while(m--)if(s[m]==e)return o[m]==t;s.push(e),o.push(t);var g=(u?Ri:zi)(e,t,n,r,i,s,o);return s.pop(),o.pop(),g}function Ur(t,n,r){var i=n.length,s=i,o=!r;if(t==null)return!s;t=gs(t);while(i--){var u=n[i];if(o&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}while(++i<s){u=n[i];var a=u[0],f=t[a],l=u[1];if(o&&u[2]){if(f===e&&!(a in t))return!1}else{var c=r?r(f,l,a):e;if(c===e?!qr(l,f,r,!0):!c)return!1}}return!0}function zr(e,t){var n=-1,r=ns(e)?O(e.length):[];return Nr(e,function(e,i,s){r[++n]=t(e,i,s)}),r}function Wr(t){var n=Ki(t);if(n.length==1&&n[0][2]){var r=n[0][0],i=n[0][1];return function(t){return t==null?!1:t[r]===i&&(i!==e||r in gs(t))}}return function(e){return Ur(e,n)}}function Xr(t,n){var r=mu(t),i=ss(t)&&as(n),s=t+"";return t=ys(t),function(o){if(o==null)return!1;var u=s;o=gs(o);if((r||!i)&&!(u in o)){o=t.length==1?o:Ir(o,ei(t,0,-1));if(o==null)return!1;u=Bs(t),o=gs(o)}return o[u]===n?n!==e||u in o:qr(n,o[u],e,!0)}}function Vr(t,n,r,i,s){if(!Nu(t))return t;var o=ns(n)&&(mu(n)||Pu(n)),u=o?null:Zu(n);return ir(u||n,function(a,f){u&&(f=a,a=n[f]);if(Vt(a))i||(i=[]),s||(s=[]),$r(t,n,f,Vr,r,i,s);else{var l=t[f],c=r?r(l,a,f,t,n):e,h=c===e;h&&(c=a),(c!==e||o&&!(f in t))&&(h||(c===c?c!==l:l===l))&&(t[f]=c)}}),t}function $r(t,n,r,i,s,o,u){var a=o.length,f=n[r];while(a--)if(o[a]==f){t[r]=u[a];return}var l=t[r],c=s?s(l,f,r,t,n):e,h=c===e;h&&(c=f,ns(f)&&(mu(f)||Pu(f))?c=mu(l)?l:ns(l)?rr(l):[]:Mu(f)||vu(f)?c=vu(l)?Iu(l):Mu(l)?l:{}:h=!1),o.push(f),u.push(c);if(h)t[r]=i(c,f,s,o,u);else if(c===c?c!==l:l===l)t[r]=c}function Jr(t){return function(n){return n==null?e:n[t]}}function Kr(e){var t=e+"";return e=ys(e),function(n){return Ir(n,e,t)}}function Qr(e,t){var n=e?t.length:0;while(n--){var r=t[n];if(r!=i&&rs(r)){var i=r;yn.call(e,r,1)}}return e}function Gr(e,t){return e+hn(Mn()*(t-e+1))}function Yr(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}function ei(t,n,r){var i=-1,s=t.length;n=n==null?0:+n||0,n<0&&(n=-n>s?0:s+n),r=r===e||r>s?s:+r||0,r<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;var o=O(s);while(++i<s)o[i]=t[i+n];return o}function ti(e,t){var n;return Nr(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function ni(e,t){var n=e.length;e.sort(t);while(n--)e[n]=e[n].value;return e}function ri(e,t,n){var r=Wi(),i=-1;t=fr(t,function(e){return r(e)});var s=zr(e,function(e){var n=fr(t,function(t){return t(e)});return{criteria:n,index:++i,value:e}});return ni(s,function(e,t){return Rt(e,t,n)})}function ii(e,t){var n=0;return Nr(e,function(e,r,i){n+=+t(e,r,i)||0}),n}function si(e,t){var n=-1,r=$i(),i=e.length,s=r==Ht,o=s&&i>=200,u=o?wi():null,a=[];u?(r=tr,s=!1):(o=!1,u=t?[]:a);e:while(++n<i){var f=e[n],l=t?t(f,n,e):f;if(s&&f===f){var c=u.length;while(c--)if(u[c]===l)continue e;t&&u.push(l),a.push(f)}else r(u,l,0)<0&&((t||o)&&u.push(l),a.push(f))}return a}function oi(e,t){var n=-1,r=t.length,i=O(r);while(++n<r)i[n]=e[t[n]];return i}function ui(e,t,n,r){var i=e.length,s=r?i:-1;while((r?s--:++s<i)&&t(e[s],s,e));return n?ei(e,r?0:s,r?s+1:i):ei(e,r?s+1:0,r?i:s)}function ai(e,t){var n=e;n instanceof Xn&&(n=n.value());var r=-1,i=t.length;while(++r<i){var s=[n],o=t[r];vn.apply(s,o.args),n=o.func.apply(o.thisArg,s)}return n}function fi(e,t,n){var r=0,i=e?e.length:r;if(typeof t=="number"&&t===t&&i<=Bn){while(r<i){var s=r+i>>>1,o=e[s];(n?o<=t:o<t)&&o!==null?r=s+1:i=s}return i}return li(e,t,Ia,n)}function li(t,n,r,i){n=r(n);var s=0,o=t?t.length:0,u=n!==n,a=n===null,f=n===e;while(s<o){var l=hn((s+o)/2),c=r(t[l]),h=c!==e,p=c===c;if(u)var d=p||i;else a?d=p&&h&&(i||c!=null):f?d=p&&(i||h):c==null?d=!1:d=i?c<=n:c<n;d?s=l+1:o=l}return kn(o,Hn)}function ci(t,n,r){if(typeof t!="function")return Ia;if(n===e)return t;switch(r){case 1:return function(e){return t.call(n,e)};case 3:return function(e,r,i){return t.call(n,e,r,i)};case 4:return function(e,r,i,s){return t.call(n,e,r,i,s)};case 5:return function(e,r,i,s,o){return t.call(n,e,r,i,s,o)}}return function(){return t.apply(n,arguments)}}function hi(e){return fn.call(e,0)}function pi(e,t,n){var r=n.length,i=-1,s=Cn(e.length-r,0),o=-1,u=t.length,a=O(s+u);while(++o<u)a[o]=t[o];while(++i<r)a[n[i]]=e[i];while(s--)a[o++]=e[i++];return a}function di(e,t,n){var r=-1,i=n.length,s=-1,o=Cn(e.length-i,0),u=-1,a=t.length,f=O(o+a);while(++s<o)f[s]=e[s];var l=s;while(++u<a)f[l+u]=t[u];while(++r<i)f[l+n[r]]=e[s++];return f}function vi(e,t){return function(n,r,i){var s=t?t():{};r=Wi(r,i,3);if(mu(n)){var o=-1,u=n.length;while(++o<u){var a=n[o];e(s,a,r(a,o,n),n)}}else Nr(n,function(t,n,i){e(s,t,r(t,n,i),i)});return s}}function mi(t){return uu(function(n,r){var i=-1,s=n==null?0:r.length,o=s>2?r[s-2]:e,u=s>2?r[2]:e,a=s>1?r[s-1]:e;typeof o=="function"?(o=ci(o,a,5),s-=2):(o=typeof a=="function"?a:e,s-=o?1:0),u&&is(r[0],r[1],u)&&(o=s<3?e:o,s=1);while(++i<s){var f=r[i];f&&t(n,f,o)}return n})}function gi(e,t){return function(n,r){var i=n?Ji(n):0;if(!us(i))return e(n,r);var s=t?i:-1,o=gs(n);while(t?s--:++s<i)if(r(o[s],s,o)===!1)break;return n}}function yi(e){return function(t,n,r){var i=gs(t),s=r(t),o=s.length,u=e?o:-1;while(e?u--:++u<o){var a=s[u];if(n(i[a],a,i)===!1)break}return t}}function bi(e,t){function r(){var i=this&&this!==_t&&this instanceof r?n:e;return i.apply(t,arguments)}var n=Si(e);return r}function Ei(e){return function(t){var n=-1,r=Ha(ma(t)),i=r.length,s="";while(++n<i)s=e(s,r[n],n);return s}}function Si(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4])}var n=Sr(e.prototype),r=e.apply(n,t);return Nu(r)?r:n}}function xi(e){function t(n,r,i){i&&is(n,r,i)&&(r=null);var s=qi(n,e,null,null,null,null,null,r);return s.placeholder=t.placeholder,s}return t}function Ti(e,t){return function(n,r,i){i&&is(n,r,i)&&(r=null),r=Wi(r,i,3);if(r.length==1){n=ms(n);var s=ur(n,r,e,t);if(!n.length||s!==t)return s}return Lr(n,r,e,t)}}function Ni(t,n){return function(r,i,s){i=Wi(i,s,3);if(mu(r)){var o=Pt(r,i,n);return o>-1?r[o]:e}return Mr(r,i,t)}}function Ci(e){return function(t,n,r){return!t||!t.length?-1:(n=Wi(n,r,3),Pt(t,n,e))}}function ki(e){return function(t,n,r){return n=Wi(n,r,3),Mr(t,n,e,!0)}}function Li(e){return function(){var t,n=arguments.length,r=e?n:-1,i=0,o=O(n);while(e?r--:++r<n){var a=o[i++]=arguments[r];if(typeof a!="function")throw new Lt(y);!t&&zn.prototype.thru&&Vi(a)=="wrapper"&&(t=new zn([]))}r=t?-1:n;while(++r<n){a=o[r];var c=Vi(a),h=c=="wrapper"?Xi(a):null;h&&os(h[0])&&h[1]==(f|s|u|l)&&!h[4].length&&h[9]==1?t=t[Vi(h[0])].apply(t,h[3]):t=a.length==1&&os(a)?t[c]():t.thru(a)}return function(){var e=arguments;if(t&&e.length==1&&mu(e[0]))return t.plant(e[0]).value();var r=0,i=n?o[r].apply(this,e):e[0];while(++r<n)i=o[r].call(this,i);return i}}}function Ai(t,n){return function(r,i,s){return typeof i=="function"&&s===e&&mu(r)?t(r,i):n(r,ci(i,s,3))}}function Oi(t){return function(n,r,i){if(typeof r!="function"||i!==e)r=ci(r,i,3);return t(n,r,ea)}}function Mi(t){return function(n,r,i){if(typeof r!="function"||i!==e)r=ci(r,i,3);return t(n,r)}}function _i(e){return function(t,n,r){var i={};return n=Wi(n,r,3),Br(t,function(t,r,s){var o=n(t,r,s);r=e?o:r,t=e?t:o,i[r]=t}),i}}function Di(e){return function(t,n,r){return t=jt(t),(e?t:"")+ji(t,n,r)+(e?"":t)}}function Pi(e){var t=uu(function(n,r){var i=Jt(r,t.placeholder);return qi(n,e,null,r,i)});return t}function Hi(t,n){return function(r,i,s,o){var u=arguments.length<3;return typeof i=="function"&&o===e&&mu(r)?t(r,i,s,u):Yr(r,Wi(i,o,4),s,u,n)}}function Bi(t,l,c,h,p,d,v,m,g,y){function C(){var i=arguments.length,s=i,o=O(i);while(s--)o[s]=arguments[s];h&&(o=pi(o,h,p)),d&&(o=di(o,d,v));if(S||T){var f=C.placeholder,k=Jt(o,f);i-=k.length;if(i<y){var L=m?rr(m):null,A=Cn(y-i,0),M=S?k:null,_=S?null:k,D=S?o:null,P=S?null:o;l|=S?u:a,l&=~(S?a:u),x||(l&=~(n|r));var H=[t,l,c,D,M,P,_,L,g,A],B=Bi.apply(e,H);return os(t)&&ps(B,H),B.placeholder=f,B}}var j=w?c:this,F=E?j[t]:t;return m&&(o=hs(o,m)),b&&g<o.length&&(o.length=g),this&&this!==_t&&this instanceof C&&(F=N||Si(t)),F.apply(j,o)}var b=l&f,w=l&n,E=l&r,S=l&s,x=l&i,T=l&o,N=E?null:Si(t);return C}function ji(e,t,n){var r=e.length;t=+t;if(r>=t||!Tn(t))return"";var i=t-r;return n=n==null?" ":n+"",Na(n,ln(i/n.length)).slice(0,i)}function Fi(e,t,r,i){function u(){var t=-1,n=arguments.length,a=-1,f=i.length,l=O(n+f);while(++a<f)l[a]=i[a];while(n--)l[a++]=arguments[++t];var c=this&&this!==_t&&this instanceof u?o:e;return c.apply(s?r:this,l)}var s=t&n,o=Si(e);return u}function Ii(e){return function(t,n,r,i){var s=Wi(r);return r==null&&s===wr?fi(t,n,e):li(t,n,s(r,i,1),e)}}function qi(t,i,s,o,f,l,c,h){var p=i&r;if(!p&&typeof t!="function")throw new Lt(y);var d=o?o.length:0;d||(i&=~(u|a),o=f=null),d-=f?f.length:0;if(i&a){var v=o,m=f;o=f=null}var g=p?null:Xi(t),b=[t,i,s,o,f,v,m,l,c,h];g&&(fs(b,g),i=b[1],h=b[9]),b[9]=h==null?p?0:t.length:Cn(h-d,0)||0;if(i==n)var w=bi(b[0],b[2]);else i!=u&&i!=(n|u)||!!b[4].length?w=Bi.apply(e,b):w=Fi.apply(e,b);var E=g?Zr:ps;return E(w,b)}function Ri(t,n,r,i,s,o,u){var a=-1,f=t.length,l=n.length;if(f!=l&&!(s&&l>f))return!1;while(++a<f){var c=t[a],h=n[a],p=i?i(s?h:c,s?c:h,a):e;if(p!==e){if(p)continue;return!1}if(s){if(!hr(n,function(e){return c===e||r(c,e,i,s,o,u)}))return!1}else if(c!==h&&!r(c,h,i,s,o,u))return!1}return!0}function Ui(e,t,n){switch(n){case S:case x:return+e==+t;case T:return e.name==t.name&&e.message==t.message;case k:return e!=+e?t!=+t:e==+t;case A:case M:return e==t+""}return!1}function zi(t,n,r,i,s,o,u){var a=Zu(t),f=a.length,l=Zu(n),c=l.length;if(f!=c&&!s)return!1;var h=f;while(h--){var p=a[h];if(!(s?p in n:nn.call(n,p)))return!1}var d=s;while(++h<f){p=a[h];var v=t[p],m=n[p],g=i?i(s?m:v,s?v:m,p):e;if(g===e?!r(v,m,i,s,o,u):!g)return!1;d||(d=p=="constructor")}if(!d){var y=t.constructor,b=n.constructor;if(y!=b&&"constructor"in t&&"constructor"in n&&!(typeof y=="function"&&y instanceof y&&typeof b=="function"&&b instanceof b))return!1}return!0}function Wi(e,t,n){var r=Rn.callback||ja;return r=r===ja?wr:r,n?r(e,t,n):r}function Vi(e){var t=e.name,n=qn[t],r=n?n.length:0;while(r--){var i=n[r],s=i.func;if(s==null||s==e)return i.name}return t}function $i(e,t,n){var r=Rn.indexOf||Ds;return r=r===Ds?Ht:r,e?r(e,t,n):r}function Ki(e){var t=sa(e),n=t.length;while(n--)t[n][2]=as(t[n][1]);return t}function Qi(t,n){var r=t==null?e:t[n];return Lu(r)?r:e}function Gi(e,t,n){var r=-1,i=n?n.length:0;while(++r<i){var s=n[r],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=kn(t,e+o);break;case"takeRight":e=Cn(e,t-o)}}return{start:e,end:t}}function Yi(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&nn.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Zi(e){var t=e.constructor;return typeof t=="function"&&t instanceof t||(t=Nt),new t}function es(e,t,n){var r=e.constructor;switch(t){case D:return hi(e);case S:case x:return new r(+e);case P:case H:case B:case j:case F:case I:case q:case R:case U:var i=e.buffer;return new r(n?hi(i):i,e.byteOffset,e.length);case k:case M:return new r(e);case A:var s=new r(e.source,ut.exec(e));s.lastIndex=e.lastIndex}return s}function ts(t,n,r){t!=null&&!ss(n,t)&&(n=ys(n),t=n.length==1?t:Ir(t,ei(n,0,-1)),n=Bs(n));var i=t==null?t:t[n];return i==null?e:i.apply(t,r)}function ns(e){return e!=null&&us(Ji(e))}function rs(e,t){return e=typeof e=="number"||lt.test(e)?+e:-1,t=t==null?Fn:t,e>-1&&e%1==0&&e<t}function is(e,t,n){if(!Nu(n))return!1;var r=typeof t;if(r=="number"?ns(n)&&rs(t,n.length):r=="string"&&t in n){var i=n[t];return e===e?e===i:i!==i}return!1}function ss(e,t){var n=typeof e;if(n=="string"&&et.test(e)||n=="number")return!0;if(mu(e))return!1;var r=!Z.test(e);return r||t!=null&&e in gs(t)}function os(e){var t=Vi(e);if(t in Xn.prototype){var n=Rn[t];if(e===n)return!0;var r=Xi(n);return!!r&&e===r[0]}return!1}function us(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Fn}function as(e){return e===e&&!Nu(e)}function fs(e,t){var r=e[1],o=t[1],u=r|o,a=u<f,c=o==f&&r==s||o==f&&r==l&&e[7].length<=t[8]||o==(f|l)&&r==s;if(!a&&!c)return e;o&n&&(e[2]=t[2],u|=r&n?0:i);var h=t[3];if(h){var p=e[3];e[3]=p?pi(p,h,t[4]):rr(h),e[4]=p?Jt(e[3],b):rr(t[4])}return h=t[5],h&&(p=e[5],e[5]=p?di(p,h,t[6]):rr(h),e[6]=p?Jt(e[5],b):rr(t[6])),h=t[7],h&&(e[7]=rr(h)),o&f&&(e[8]=e[8]==null?t[8]:kn(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=u,e}function ls(e,t){e=gs(e);var n=-1,r=t.length,i={};while(++n<r){var s=t[n];s in e&&(i[s]=e[s])}return i}function cs(e,t){var n={};return Hr(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function hs(t,n){var r=t.length,i=kn(n.length,r),s=rr(t);while(i--){var o=n[i];t[i]=rs(o,r)?s[o]:e}return t}function ds(t){var n,r=Rn.support;if(!Vt(t)||sn.call(t)!=L||!nn.call(t,"constructor")&&(n=t.constructor,typeof n=="function"&&!(n instanceof n)))return!1;var i;return Hr(t,function(e,t){i=t}),i===e||nn.call(t,i)}function vs(e){var t=ea(e),n=t.length,r=n&&e.length,i=!!r&&us(r)&&(mu(e)||vu(e)),s=-1,o=[];while(++s<n){var u=t[s];(i&&rs(u,r)||nn.call(e,u))&&o.push(u)}return o}function ms(e){return e==null?[]:ns(e)?Nu(e)?e:Nt(e):la(e)}function gs(e){return Nu(e)?e:Nt(e)}function ys(e){if(mu(e))return e;var t=[];return jt(e).replace(tt,function(e,n,r,i){t.push(r?i.replace(st,"$1"):n||e)}),t}function bs(e){return e instanceof Xn?e.clone():new zn(e.__wrapped__,e.__chain__,rr(e.__actions__))}function ws(e,t,n){(n?is(e,t,n):t==null)?t=1:t=Cn(+t||1,1);var r=0,i=e?e.length:0,s=-1,o=O(ln(i/t));while(r<i)o[++s]=ei(e,r,r+=t);return o}function Es(e){var t=-1,n=e?e.length:0,r=-1,i=[];while(++t<n){var s=e[t];s&&(i[++r]=s)}return i}function xs(e,t,n){var r=e?e.length:0;if(!r)return[];if(n?is(e,t,n):t==null)t=1;return ei(e,t<0?0:t)}function Ts(e,t,n){var r=e?e.length:0;if(!r)return[];if(n?is(e,t,n):t==null)t=1;return t=r-(+t||0),ei(e,0,t<0?0:t)}function Ns(e,t,n){return e&&e.length?ui(e,Wi(t,n,3),!0,!0):[]}function Cs(e,t,n){return e&&e.length?ui(e,Wi(t,n,3),!0):[]}function ks(e,t,n,r){var i=e?e.length:0;return i?(n&&typeof n!="number"&&is(e,t,n)&&(n=0,r=i),Ar(e,t,n,r)):[]}function Os(t){return t?t[0]:e}function Ms(e,t,n){var r=e?e.length:0;return n&&is(e,t,n)&&(t=!1),r?_r(e,t):[]}function _s(e){var t=e?e.length:0;return t?_r(e,!0):[]}function Ds(e,t,n){var r=e?e.length:0;if(!r)return-1;if(typeof n=="number")n=n<0?Cn(r+n,0):n;else if(n){var i=fi(e,t),s=e[i];return(t===t?t===s:s!==s)?i:-1}return Ht(e,t,n||0)}function Ps(e){return Ts(e,1)}function Bs(t){var n=t?t.length:0;return n?t[n-1]:e}function js(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if(typeof n=="number")i=(n<0?Cn(r+n,0):kn(n||0,r-1))+1;else if(n){i=fi(e,t,!0)-1;var s=e[i];return(t===t?t===s:s!==s)?i:-1}if(t!==t)return Xt(e,i,!0);while(i--)if(e[i]===t)return i;return-1}function Fs(){var e=arguments,t=e[0];if(!t||!t.length)return t;var n=0,r=$i(),i=e.length;while(++n<i){var s=0,o=e[n];while((s=r(t,o,s))>-1)yn.call(t,s,1)}return t}function qs(e,t,n){var r=[];if(!e||!e.length)return r;var i=-1,s=[],o=e.length;t=Wi(t,n,3);while(++i<o){var u=e[i];t(u,i,e)&&(r.push(u),s.push(i))}return Qr(e,s),r}function Rs(e){return xs(e,1)}function Us(e,t,n){var r=e?e.length:0;return r?(n&&typeof n!="number"&&is(e,t,n)&&(t=0,n=r),ei(e,t,n)):[]}function Xs(e,t,n){var r=e?e.length:0;if(!r)return[];if(n?is(e,t,n):t==null)t=1;return ei(e,0,t<0?0:t)}function Vs(e,t,n){var r=e?e.length:0;if(!r)return[];if(n?is(e,t,n):t==null)t=1;return t=r-(+t||0),ei(e,t<0?0:t)}function $s(e,t,n){return e&&e.length?ui(e,Wi(t,n,3),!1,!0):[]}function Js(e,t,n){return e&&e.length?ui(e,Wi(t,n,3)):[]}function Qs(e,t,n,r){var i=e?e.length:0;if(!i)return[];t!=null&&typeof t!="boolean"&&(r=n,n=is(e,t,r)?null:t,t=!1);var s=Wi();if(n!=null||s!==wr)n=s(n,r,3);return t&&$i()==Ht?Kt(e,n):si(e,n)}function Gs(e){if(!e||!e.length)return[];var t=-1,n=0;e=ar(e,function(e){if(ns(e))return n=Cn(e.length,n),!0});var r=O(n);while(++t<n)r[t]=fr(e,Jr(t));return r}function Ys(t,n,r){var i=t?t.length:0;if(!i)return[];var s=Gs(t);return n==null?s:(n=ci(n,r,4),fr(s,function(t){return lr(t,n,e,!0)}))}function eo(){var e=-1,t=arguments.length;while(++e<t){var n=arguments[e];if(ns(n))var r=r?Tr(r,n).concat(Tr(n,r)):n}return r?si(r):[]}function no(e,t){var n=-1,r=e?e.length:0,i={};r&&!t&&!mu(e[0])&&(t=[]);while(++n<r){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i}function io(e){var t=Rn(e);return t.__chain__=!0,t}function so(e,t,n){return t.call(n,e),e}function oo(e,t,n){return t.call(n,e)}function uo(){return io(this)}function ao(){return new zn(this.value(),this.__chain__)}function fo(e){var t,n=this;while(n instanceof Un){var r=bs(n);t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t}function lo(){var e=this.__wrapped__;return e instanceof Xn?(this.__actions__.length&&(e=new Xn(this)),new zn(e.reverse(),this.__chain__)):this.thru(function(e){return e.reverse()})}function co(){return this.value()+""}function ho(){return ai(this.__wrapped__,this.__actions__)}function mo(t,n,r){var i=mu(t)?or:kr;r&&is(t,n,r)&&(n=null);if(typeof n!="function"||r!==e)n=Wi(n,r,3);return i(t,n)}function go(e,t,n){var r=mu(e)?ar:Or;return t=Wi(t,n,3),r(e,t)}function wo(e,t){return yo(e,Wr(t))}function To(e,t,n,r){var i=e?Ji(e):0;return us(i)||(e=la(e),i=e.length),i?(typeof n!="number"||r&&is(t,n,r)?n=0:n=n<0?Cn(i+n,0):n||0,typeof e=="string"||!mu(e)&&Du(e)?n<i&&e.indexOf(t,n)>-1:$i(e,t,n)>-1):!1}function ko(e,t,n){var r=mu(e)?fr:zr;return t=Wi(t,n,3),r(e,t)}function Ao(e,t){return ko(e,$a(t))}function _o(e,t,n){var r=mu(e)?ar:Or;return t=Wi(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})}function Do(t,n,r){if(r?is(t,n,r):n==null){t=ms(t);var i=t.length;return i>0?t[Gr(0,i-1)]:e}var s=-1,o=Fu(t),i=o.length,u=i-1;n=kn(n<0?0:+n||0,i);while(++s<n){var a=Gr(s,u),f=o[a];o[a]=o[s],o[s]=f}return o.length=n,o}function Po(e){return Do(e,Dn)}function Ho(e){var t=e?Ji(e):0;return us(t)?t:Zu(e).length}function Bo(t,n,r){var i=mu(t)?hr:ti;r&&is(t,n,r)&&(n=null);if(typeof n!="function"||r!==e)n=Wi(n,r,3);return i(t,n)}function jo(e,t,n){if(e==null)return[];n&&is(e,t,n)&&(t=null);var r=-1;t=Wi(t,n,3);var i=zr(e,function(e,n,i){return{criteria:t(e,n,i),index:++r,value:e}});return ni(i,qt)}function Io(e,t,n,r){return e==null?[]:(r&&is(t,n,r)&&(n=null),mu(t)||(t=t==null?[]:[t]),mu(n)||(n=n==null?[]:[n]),ri(e,t,n))}function qo(e,t){return go(e,Wr(t))}function Uo(e,t){if(typeof t!="function"){if(typeof e!="function")throw new Lt(y);var n=e;e=t,t=n}return e=Tn(e=+e)?e:0,function(){if(--e<1)return t.apply(this,arguments)}}function zo(e,t,n){return n&&is(e,t,n)&&(t=null),t=e&&t==null?e.length:Cn(+t||0,0),qi(e,f,null,null,null,null,t)}function Wo(e,t){var n;if(typeof t!="function"){if(typeof e!="function")throw new Lt(y);var r=e;e=t,t=r}return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}function Qo(t,n,r){function v(){f&&cn(f),s&&cn(s),s=f=l=e}function m(){var r=n-(Ro()-u);if(r<=0||r>n){s&&cn(s);var h=l;s=f=l=e,h&&(c=Ro(),o=t.apply(a,i),!f&&!s&&(i=a=null))}else f=gn(m,r)}function g(){f&&cn(f),s=f=l=e;if(p||h!==n)c=Ro(),o=t.apply(a,i),!f&&!s&&(i=a=null)}function b(){i=arguments,u=Ro(),a=this,l=p&&(f||!d);if(h===!1)var e=d&&!f;else{!s&&!d&&(c=u);var r=h-(u-c),v=r<=0||r>h;v?(s&&(s=cn(s)),c=u,o=t.apply(a,i)):s||(s=gn(g,r))}return v&&f?f=cn(f):!f&&n!==h&&(f=gn(m,n)),e&&(v=!0,o=t.apply(a,i)),v&&!f&&!s&&(i=a=null),o}var i,s,o,u,a,f,l,c=0,h=!1,p=!0;if(typeof t!="function")throw new Lt(y);n=n<0?0:+n||0;if(r===!0){var d=!0;p=!1}else Nu(r)&&(d=r.leading,h="maxWait"in r&&Cn(+r.maxWait||0,n),p="trailing"in r?r.trailing:p);return b.cancel=v,b}function tu(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new Lt(y);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o),o};return n.cache=new tu.Cache,n}function nu(e){if(typeof e!="function")throw new Lt(y);return function(){return!e.apply(this,arguments)}}function ru(e){return Wo(2,e)}function uu(t,n){if(typeof t!="function")throw new Lt(y);return n=Cn(n===e?t.length-1:+n||0,0),function(){var e=arguments,r=-1,i=Cn(e.length-n,0),s=O(i);while(++r<i)s[r]=e[n+r];switch(n){case 0:return t.call(this,s);case 1:return t.call(this,e[0],s);case 2:return t.call(this,e[0],e[1],s)}var o=O(n+1);r=-1;while(++r<n)o[r]=e[r];return o[n]=s,t.apply(this,o)}}function au(e){if(typeof e!="function")throw new Lt(y);return function(t){return e.apply(this,t)}}function fu(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new Lt(y);return n===!1?r=!1:Nu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),wt.leading=r,wt.maxWait=+t,wt.trailing=i,Qo(e,t,wt)}function lu(e,t){return t=t==null?Ia:t,qi(t,u,null,[e],[])}function cu(e,t,n,r){return t&&typeof t!="boolean"&&is(e,t,n)?t=!1:typeof t=="function"&&(r=n,n=t,t=!1),typeof n=="function"?Er(e,t,ci(n,r,1)):Er(e,t)}function hu(e,t,n){return typeof t=="function"?Er(e,!0,ci(t,n,1)):Er(e,!0)}function pu(e,t){return e>t}function du(e,t){return e>=t}function vu(e){return Vt(e)&&ns(e)&&sn.call(e)==w}function gu(e){return e===!0||e===!1||Vt(e)&&sn.call(e)==S}function yu(e){return Vt(e)&&sn.call(e)==x}function bu(e){return!!e&&e.nodeType===1&&Vt(e)&&sn.call(e).indexOf("Element")>-1}function wu(e){return e==null?!0:ns(e)&&(mu(e)||Du(e)||vu(e)||Vt(e)&&Tu(e.splice))?!e.length:!Zu(e).length}function Eu(t,n,r,i){r=typeof r=="function"?ci(r,i,3):e;var s=r?r(t,n):e;return s===e?qr(t,n,r):!!s}function Su(e){return Vt(e)&&typeof e.message=="string"&&sn.call(e)==T}function Nu(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Cu(t,n,r,i){return r=typeof r=="function"?ci(r,i,3):e,Ur(t,Ki(n),r)}function ku(e){return Ou(e)&&e!=+e}function Lu(e){return e==null?!1:sn.call(e)==N?un.test(tn.call(e)):Vt(e)&&ft.test(e)}function Au(e){return e===null}function Ou(e){return typeof e=="number"||Vt(e)&&sn.call(e)==k}function _u(e){return Vt(e)&&sn.call(e)==A}function Du(e){return typeof e=="string"||Vt(e)&&sn.call(e)==M}function Pu(e){return Vt(e)&&us(e.length)&&!!yt[sn.call(e)]}function Hu(t){return t===e}function Bu(e,t){return e<t}function ju(e,t){return e<=t}function Fu(e){var t=e?Ji(e):0;return us(t)?t?rr(e):[]:la(e)}function Iu(e){return br(e,ea(e))}function Ru(e,t,n){var r=Sr(e);return n&&is(e,t,n)&&(t=null),t?gr(r,t):r}function Ku(e){return Fr(e,ea(e))}function Qu(t,n,r){var i=t==null?e:Ir(t,ys(n),n+"");return i===e?r:i}function Gu(e,t){if(e==null)return!1;var n=nn.call(e,t);if(!n&&!ss(t)){t=ys(t),e=t.length==1?e:Ir(e,ei(t,0,-1));if(e==null)return!1;t=Bs(t),n=nn.call(e,t)}return n||us(e.length)&&rs(t,e.length)&&(mu(e)||vu(e))}function Yu(e,t,n){n&&is(e,t,n)&&(t=null);var r=-1,i=Zu(e),s=i.length,o={};while(++r<s){var u=i[r],a=e[u];t?nn.call(o,a)?o[a].push(u):o[a]=[u]:o[a]=u}return o}function ea(e){if(e==null)return[];Nu(e)||(e=Nt(e));var t=e.length;t=t&&us(t)&&(mu(e)||vu(e))&&t||0;var n=e.constructor,r=-1,i=typeof n=="function"&&n.prototype===e,s=O(t),o=t>0;while(++r<t)s[r]=r+"";for(var u in e)(!o||!rs(u,t))&&(u!="constructor"||!i&&!!nn.call(e,u))&&s.push(u);return s}function sa(e){e=gs(e);var t=-1,n=Zu(e),r=n.length,i=O(r);while(++t<r){var s=n[t];i[t]=[s,e[s]]}return i}function ua(t,n,r){var i=t==null?e:t[n];return i===e&&(t!=null&&!ss(n,t)&&(n=ys(n),t=n.length==1?t:Ir(t,ei(n,0,-1)),i=t==null?e:t[Bs(n)]),i=i===e?r:i),Tu(i)?i.call(t):i}function aa(e,t,n){if(e==null)return e;var r=t+"";t=e[r]!=null||ss(t,e)?[r]:ys(t);var i=-1,s=t.length,o=s-1,u=e;while(u!=null&&++i<s){var a=t[i];Nu(u)&&(i==o?u[a]=n:u[a]==null&&(u[a]=rs(t[i+1])?[]:{})),u=u[a]}return e}function fa(e,t,n,r){var i=mu(e)||Pu(e);t=Wi(t,r,4);if(n==null)if(i||Nu(e)){var s=e.constructor;i?n=mu(e)?new s:[]:n=Sr(Tu(s)?s.prototype:null)}else n={};return(i?ir:Br)(e,function(e,r,i){return t(n,e,r,i)}),n}function la(e){return oi(e,Zu(e))}function ca(e){return oi(e,ea(e))}function ha(e,t,n){return t=+t||0,typeof n=="undefined"?(n=t,t=0):n=+n||0,e>=kn(t,n)&&e<Cn(t,n)}function pa(e,t,n){n&&is(e,t,n)&&(t=n=null);var r=e==null,i=t==null;n==null&&(i&&typeof e=="boolean"?(n=e,e=1):typeof t=="boolean"&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0;if(n||e%1||t%1){var s=Mn();return kn(e+s*(t-e+dn("1e-"+((s+"").length-1))),t)}return Gr(e,t)}function va(e){return e=jt(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function ma(e){return e=jt(e),e&&e.replace(ct,Ut).replace(it,"")}function ga(t,n,r){t=jt(t),n+="";var i=t.length;return r=r===e?i:kn(r<0?0:+r||0,i),r-=n.length,r>=0&&t.indexOf(n,r)==r}function ya(e){return e=jt(e),e&&K.test(e)?e.replace($,zt):e}function ba(e){return e=jt(e),e&&rt.test(e)?e.replace(nt,"\\$&"):e}function Ea(e,t,n){e=jt(e),t=+t;var r=e.length;if(r>=t||!Tn(t))return e;var i=(t-r)/2,s=hn(i),o=ln(i);return n=ji("",o,n),n.slice(0,s)+e+n}function Ta(e,t,n){return n&&is(e,t,n)&&(t=0),On(e,t)}function Na(e,t){var n="";e=jt(e),t=+t;if(t<1||!e||!Tn(t))return n;do t%2&&(n+=e),t=hn(t/2),e+=e;while(t);return n}function La(e,t,n){return e=jt(e),n=n==null?0:kn(n<0?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function Aa(t,n,r){var i=Rn.templateSettings;r&&is(t,n,r)&&(n=r=null),t=jt(t),n=mr(gr({},r||n),i,vr);var s=mr(gr({},n.imports),i.imports,vr),o=Zu(s),u=oi(s,o),a,f,l=0,c=n.interpolate||ht,h="__p += '",p=Ct((n.escape||ht).source+"|"+c.source+"|"+(c===Y?ot:ht).source+"|"+(n.evaluate||ht).source+"|$","g"),d="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++gt+"]")+"\n";t.replace(p,function(e,n,r,i,s,o){return r||(r=i),h+=t.slice(l,o).replace(pt,Wt),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(f=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=o+e.length,e}),h+="';\n";var v=n.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(f?h.replace(z,""):h).replace(W,"$1").replace(X,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Ba(function(){return St(o,d+"return "+h).apply(e,u)});m.source=h;if(Su(m))throw m;return m}function Oa(e,t,n){var r=e;return e=jt(e),e?(n?is(r,t,n):t==null)?e.slice(Qt(e),Gt(e)+1):(t+="",e.slice(Ft(e,t),It(e,t)+1)):e}function Ma(e,t,n){var r=e;return e=jt(e),e?(n?is(r,t,n):t==null)?e.slice(Qt(e)):e.slice(Ft(e,t+"")):e}function _a(e,t,n){var r=e;return e=jt(e),e?(n?is(r,t,n):t==null)?e.slice(0,Gt(e)+1):e.slice(0,It(e,t+"")+1):e}function Da(e,t,n){n&&is(e,t,n)&&(t=null);var r=c,i=h;if(t!=null)if(Nu(t)){var s="separator"in t?t.separator:s;r="length"in t?+t.length||0:r,i="omission"in t?jt(t.omission):i}else r=+t||0;e=jt(e);if(r>=e.length)return e;var o=r-i.length;if(o<1)return i;var u=e.slice(0,o);if(s==null)return u+i;if(_u(s)){if(e.slice(o).search(s)){var a,f,l=e.slice(0,o);s.global||(s=Ct(s.source,(ut.exec(s)||"")+"g")),s.lastIndex=0;while(a=s.exec(l))f=a.index;u=u.slice(0,f==null?o:f)}}else if(e.indexOf(s,o)!=o){var p=u.lastIndexOf(s);p>-1&&(u=u.slice(0,p))}return u+i}function Pa(e){return e=jt(e),e&&J.test(e)?e.replace(V,Yt):e}function Ha(e,t,n){return n&&is(e,t,n)&&(t=null),e=jt(e),e.match(t||dt)||[]}function ja(e,t,n){return n&&is(e,t,n)&&(t=null),Vt(e)?qa(e):wr(e,t)}function Fa(e){return function(){return e}}function Ia(e){return e}function qa(e){return Wr(Er(e,!0))}function Ra(e,t){return Xr(e,Er(t,!0))}function Wa(e,t,n){if(n==null){var r=Nu(t),i=r?Zu(t):null,s=i&&i.length?Fr(t,i):null;if(s?!s.length:!r)s=!1,n=t,t=e,e=this}s||(s=Fr(t,Zu(t)));var o=!0,u=-1,a=Tu(e),f=s.length;n===!1?o=!1:Nu(n)&&"chain"in n&&(o=n.chain);while(++u<f){var l=s[u],c=t[l];e[l]=c,a&&(e.prototype[l]=function(t){return function(){var n=this.__chain__;if(o||n){var r=e(this.__wrapped__),i=r.__actions__=rr(this.__actions__);return i.push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}var s=[this.value()];return vn.apply(s,arguments),t.apply(e,s)}}(c))}return e}function Xa(){return C._=on,this}function Va(){}function $a(e){return ss(e)?Jr(e):Kr(e)}function Ja(e){return function(t){return Ir(e,ys(t),t+"")}}function Ka(e,t,n){n&&is(e,t,n)&&(t=n=null),e=+e||0,n=n==null?1:+n||0,t==null?(t=e,e=0):t=+t||0;var r=-1,i=Cn(ln((t-e)/(n||1)),0),s=O(i);while(++r<i)s[r]=e,e+=n;return s}function Qa(e,t,n){e=hn(e);if(e<1||!Tn(e))return[];var r=-1,i=O(kn(e,Pn));t=ci(t,n,1);while(++r<e)r<Pn?i[r]=t(r):t(r);return i}function Ga(e){var t=++rn;return jt(e)+t}function Ya(e,t){return(+e||0)+(+t||0)}function tf(e,t,n){n&&is(e,t,n)&&(t=null);var r=Wi(),i=t==null;if(!i||r!==wr)i=!1,t=r(t,n,3);return i?pr(mu(e)?e:ms(e)):ii(e,t)}C=C?en.defaults(_t.Object(),C,en.pick(_t,mt)):_t;var O=C.Array,_=C.Date,Et=C.Error,St=C.Function,xt=C.Math,Tt=C.Number,Nt=C.Object,Ct=C.RegExp,kt=C.String,Lt=C.TypeError,At=O.prototype,Ot=Nt.prototype,Mt=kt.prototype,$t=($t=C.window)?$t.document:null,tn=St.prototype.toString,nn=Ot.hasOwnProperty,rn=0,sn=Ot.toString,on=C._,un=Ct("^"+ba(tn.call(nn)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),an=Qi(C,"ArrayBuffer"),fn=Qi(an&&new an(0),"slice"),ln=xt.ceil,cn=C.clearTimeout,hn=xt.floor,pn=Qi(Nt,"getPrototypeOf"),dn=C.parseFloat,vn=At.push,mn=Qi(C,"Set"),gn=C.setTimeout,yn=At.splice,bn=Qi(C,"Uint8Array"),wn=Qi(C,"WeakMap"),En=function(){try{var e=Qi(C,"Float64Array"),t=new e(new an(10),0,1)&&e}catch(n){}return t||null}(),Sn=Qi(Nt,"create"),xn=Qi(O,"isArray"),Tn=C.isFinite,Nn=Qi(Nt,"keys"),Cn=xt.max,kn=xt.min,Ln=Qi(_,"now"),An=Qi(Tt,"isFinite"),On=C.parseInt,Mn=xt.random,_n=Tt.NEGATIVE_INFINITY,Dn=Tt.POSITIVE_INFINITY,Pn=4294967295,Hn=Pn-1,Bn=Pn>>>1,jn=En?En.BYTES_PER_ELEMENT:0,Fn=9007199254740991,In=wn&&new wn,qn={},Wn=Rn.support={};(function(e){var t=function(){this.x=e},n={0:e,length:e},r=[];t.prototype={valueOf:e,y:e};for(var i in new t)r.push(i);try{Wn.dom=$t.createDocumentFragment().nodeType===11}catch(s){Wn.dom=!1}})(1,0),Rn.templateSettings={escape:Q,evaluate:G,interpolate:Y,variable:"",imports:{_:Rn}};var Sr=function(){function e(){}return function(t){if(Nu(t)){e.prototype=t;var n=new e;e.prototype=null}return n||{}}}(),Nr=gi(Br),Cr=gi(jr,!0),Dr=yi(),Pr=yi(!0),Zr=In?function(e,t){return In.set(e,t),e}:Ia;fn||(hi=!an||!bn?Fa(null):function(e){var t=e.byteLength,n=En?hn(t/jn):0,r=n*jn,i=new an(t);if(n){var s=new En(i,0,n);s.set(new En(e,0,n))}return t!=r&&(s=new bn(i,r),s.set(new bn(e,r))),i});var wi=!Sn||!mn?Fa(null):function(e){return new er(e)},Xi=In?function(e){return In.get(e)}:Va,Ji=Jr("length"),ps=function(){var e=0,t=0;return function(n,r){var i=Ro(),s=d-(i-t);t=i;if(s>0){if(++e>=p)return n}else e=0;return Zr(n,r)}}(),Ss=uu(function(e,t){return ns(e)?Tr(e,_r(t,!1,!0)):[]}),Ls=Ci(),As=Ci(!0),Hs=uu(function(e){var t=e.length,n=t,r=O(l),i=$i(),s=i==Ht,o=[];while(n--){var u=e[n]=ns(u=e[n])?u:[];r[n]=s&&u.length>=120?wi(n&&u):null}var a=e[0],f=-1,l=a?a.length:0,c=r[0];e:while(++f<l){u=a[f];if((c?tr(c,u):i(o,u,0))<0){var n=t;while(--n){var h=r[n];if((h?tr(h,u):i(e[n],u,0))<0)continue e}c&&c.push(u),o.push(u)}}return o}),Is=uu(function(e,t){t=_r(t);var n=yr(e,t);return Qr(e,t.sort(Dt)),n}),zs=Ii(),Ws=Ii(!0),Ks=uu(function(e){return si(_r(e,!1,!0))}),Zs=uu(function(e,t){return ns(e)?Tr(e,t):[]}),to=uu(Gs),ro=uu(function(t){var n=t.length,r=n>2?t[n-2]:e,i=n>1?t[n-1]:e;return n>2&&typeof r=="function"?n-=2:(r=n>1&&typeof i=="function"?(--n,i):e,i=e),t.length=n,Ys(t,r,i)}),po=uu(function(e,t){return yr(e,_r(t))}),vo=vi(function(e,t,n){nn.call(e,n)?++e[n]:e[n]=1}),yo=Ni(Nr),bo=Ni(Cr,!0),Eo=Ai(ir,Nr),So=Ai(sr,Cr),xo=vi(function(e,t,n){nn.call(e,n)?e[n].push(t):e[n]=[t]}),No=vi(function(e,t,n){e[n]=t}),Co=uu(function(e,t,n){var r=-1,i=typeof t=="function",s=ss(t),o=ns(e)?O(e.length):[];return Nr(e,function(e){var u=i?t:s&&e!=null?e[t]:null;o[++r]=u?u.apply(e,n):ts(e,t,n)}),o}),Lo=vi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Oo=Hi(lr,Nr),Mo=Hi(cr,Cr),Fo=uu(function(e,t){if(e==null)return[];var n=t[2];return n&&is(t[0],t[1],n)&&(t.length=1),ri(e,_r(t),[])}),Ro=Ln||function(){return(new _).getTime()},Xo=uu(function(e,t,r){var i=n;if(r.length){var s=Jt(r,Xo.placeholder);i|=u}return qi(e,i,t,r,s)}),Vo=uu(function(e,t){t=t.length?_r(t):Ku(e);var r=-1,i=t.length;while(++r<i){var s=t[r];e[s]=qi(e[s],n,e)}return e}),$o=uu(function(e,t,i){var s=n|r;if(i.length){var o=Jt(i,$o.placeholder);s|=u}return qi(t,s,e,i,o)}),Jo=xi(s),Ko=xi(o),Go=uu(function(e,t){return xr(e,1,t)}),Yo=uu(function(e,t,n){return xr(e,t,n)}),Zo=Li(),eu=Li(!0),iu=Pi(u),su=Pi(a),ou=uu(function(e,t){return qi(e,l,null,null,null,_r(t))}),mu=xn||function(e){return Vt(e)&&us(e.length)&&sn.call(e)==E};Wn.dom||(bu=function(e){return!!e&&e.nodeType===1&&Vt(e)&&!Mu(e)});var xu=An||function(e){return typeof e=="number"&&Tn(e)},Tu=Bt(/x/)||bn&&!Bt(bn)?function(e){return sn.call(e)==N}:Bt,Mu=pn?function(e){if(!e||sn.call(e)!=L)return!1;var t=Qi(e,"valueOf"),n=t&&(n=pn(t))&&pn(n);return n?e==n||pn(e)==n:ds(e)}:ds,qu=mi(function(e,t,n){return n?mr(e,t,n):gr(e,t)}),Uu=uu(function(t){var n=t[0];return n==null?n:(t.push(dr),qu.apply(e,t))}),zu=ki(Br),Wu=ki(jr),Xu=Oi(Dr),Vu=Oi(Pr),$u=Mi(Br),Ju=Mi(jr),Zu=Nn?function(e){var t=e==null?null:e.constructor;return typeof t=="function"&&t.prototype===e||typeof e!="function"&&ns(e)?vs(e):Nu(e)?Nn(e):[]}:vs,ta=_i(!0),na=_i(),ra=mi(Vr),ia=uu(function(e,t){if(e==null)return{};if(typeof t[0]!="function"){var t=fr(_r(t),kt);return ls(e,Tr(ea(e),t))}var n=ci(t[0],t[1],3);return cs(e,function(e,t,r){return!n(e,t,r)})}),oa=uu(function(e,t){return e==null?{}:typeof t[0]=="function"?cs(e,ci(t[0],t[1],3)):ls(e,_r(t))}),da=Ei(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),wa=Ei(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Sa=Di(),xa=Di(!0);On(vt+"08")!=8&&(Ta=function(e,t,n){return(n?is(e,t,n):t==null)?t=0:t&&(t=+t),e=Oa(e),On(e,t||(at.test(e)?16:10))});var Ca=Ei(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),ka=Ei(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Ba=uu(function(t,n){try{return t.apply(e,n)}catch(r){return Su(r)?r:new Et(r)}}),Ua=uu(function(e,t){return function(n){return ts(n,e,t)}}),za=uu(function(e,t){return function(n){return ts(e,n,t)}}),Za=Ti(pu,_n),ef=Ti(Bu,Dn);return Rn.prototype=Un.prototype,zn.prototype=Sr(Un.prototype),zn.prototype.constructor=zn,Xn.prototype=Sr(Un.prototype),Xn.prototype.constructor=Xn,Kn.prototype["delete"]=Qn,Kn.prototype.get=Gn,Kn.prototype.has=Yn,Kn.prototype.set=Zn,er.prototype.push=nr,tu.Cache=Kn,Rn.after=Uo,Rn.ary=zo,Rn.assign=qu,Rn.at=po,Rn.before=Wo,Rn.bind=Xo,Rn.bindAll=Vo,Rn.bindKey=$o,Rn.callback=ja,Rn.chain=io,Rn.chunk=ws,Rn.compact=Es,Rn.constant=Fa,Rn.countBy=vo,Rn.create=Ru,Rn.curry=Jo,Rn.curryRight=Ko,Rn.debounce=Qo,Rn.defaults=Uu,Rn.defer=Go,Rn.delay=Yo,Rn.difference=Ss,Rn.drop=xs,Rn.dropRight=Ts,Rn.dropRightWhile=Ns,Rn.dropWhile=Cs,Rn.fill=ks,Rn.filter=go,Rn.flatten=Ms,Rn.flattenDeep=_s,Rn.flow=Zo,Rn.flowRight=eu,Rn.forEach=Eo,Rn.forEachRight=So,Rn.forIn=Xu,Rn.forInRight=Vu,Rn.forOwn=$u,Rn.forOwnRight=Ju,Rn.functions=Ku,Rn.groupBy=xo,Rn.indexBy=No,Rn.initial=Ps,Rn.intersection=Hs,Rn.invert=Yu,Rn.invoke=Co,Rn.keys=Zu,Rn.keysIn=ea,Rn.map=ko,Rn.mapKeys=ta,Rn.mapValues=na,Rn.matches=qa,Rn.matchesProperty=Ra,Rn.memoize=tu,Rn.merge=ra,Rn.method=Ua,Rn.methodOf=za,Rn.mixin=Wa,Rn.negate=nu,Rn.omit=ia,Rn.once=ru,Rn.pairs=sa,Rn.partial=iu,Rn.partialRight=su,Rn.partition=Lo,Rn.pick=oa,Rn.pluck=Ao,Rn.property=$a,Rn.propertyOf=Ja,Rn.pull=Fs,Rn.pullAt=Is,Rn.range=Ka,Rn.rearg=ou,Rn.reject=_o,Rn.remove=qs,Rn.rest=Rs,Rn.restParam=uu,Rn.set=aa,Rn.shuffle=Po,Rn.slice=Us,Rn.sortBy=jo,Rn.sortByAll=Fo,Rn.sortByOrder=Io,Rn.spread=au,Rn.take=Xs,Rn.takeRight=Vs,Rn.takeRightWhile=$s,Rn.takeWhile=Js,Rn.tap=so,Rn.throttle=fu,Rn.thru=oo,Rn.times=Qa,Rn.toArray=Fu,Rn.toPlainObject=Iu,Rn.transform=fa,Rn.union=Ks,Rn.uniq=Qs,Rn.unzip=Gs,Rn.unzipWith=Ys,Rn.values=la,Rn.valuesIn=ca,Rn.where=qo,Rn.without=Zs,Rn.wrap=lu,Rn.xor=eo,Rn.zip=to,Rn.zipObject=no,Rn.zipWith=ro,Rn.backflow=eu,Rn.collect=ko,Rn.compose=eu,Rn.each=Eo,Rn.eachRight=So,Rn.extend=qu,Rn.iteratee=ja,Rn.methods=Ku,Rn.object=no,Rn.select=go,Rn.tail=Rs,Rn.unique=Qs,Wa(Rn,Rn),Rn.add=Ya,Rn.attempt=Ba,Rn.camelCase=da,Rn.capitalize=va,Rn.clone=cu,Rn.cloneDeep=hu,Rn.deburr=ma,Rn.endsWith=ga,Rn.escape=ya,Rn.escapeRegExp=ba,Rn.every=mo,Rn.find=yo,Rn.findIndex=Ls,Rn.findKey=zu,Rn.findLast=bo,Rn.findLastIndex=As,Rn.findLastKey=Wu,Rn.findWhere=wo,Rn.first=Os,Rn.get=Qu,Rn.gt=pu,Rn.gte=du,Rn.has=Gu,Rn.identity=Ia,Rn.includes=To,Rn.indexOf=Ds,Rn.inRange=ha,Rn.isArguments=vu,Rn.isArray=mu,Rn.isBoolean=gu,Rn.isDate=yu,Rn.isElement=bu,Rn.isEmpty=wu,Rn.isEqual=Eu,Rn.isError=Su,Rn.isFinite=xu,Rn.isFunction=Tu,Rn.isMatch=Cu,Rn.isNaN=ku,Rn.isNative=Lu,Rn.isNull=Au,Rn.isNumber=Ou,Rn.isObject=Nu,Rn.isPlainObject=Mu,Rn.isRegExp=_u,Rn.isString=Du,Rn.isTypedArray=Pu,Rn.isUndefined=Hu,Rn.kebabCase=wa,Rn.last=Bs,Rn.lastIndexOf=js,Rn.lt=Bu,Rn.lte=ju,Rn.max=Za,Rn.min=ef,Rn.noConflict=Xa,Rn.noop=Va,Rn.now=Ro,Rn.pad=Ea,Rn.padLeft=Sa,Rn.padRight=xa,Rn.parseInt=Ta,Rn.random=pa,Rn.reduce=Oo,Rn.reduceRight=Mo,Rn.repeat=Na,Rn.result=ua,Rn.runInContext=Zt,Rn.size=Ho,Rn.snakeCase=Ca,Rn.some=Bo,Rn.sortedIndex=zs,Rn.sortedLastIndex=Ws,Rn.startCase=ka,Rn.startsWith=La,Rn.sum=tf,Rn.template=Aa,Rn.trim=Oa,Rn.trimLeft=Ma,Rn.trimRight=_a,Rn.trunc=Da,Rn.unescape=Pa,Rn.uniqueId=Ga,Rn.words=Ha,Rn.all=mo,Rn.any=Bo,Rn.contains=To,Rn.eq=Eu,Rn.detect=yo,Rn.foldl=Oo,Rn.foldr=Mo,Rn.head=Os,Rn.include=To,Rn.inject=Oo,Wa(Rn,function(){var e={};return Br(Rn,function(t,n){Rn.prototype[n]||(e[n]=t)}),e}(),!1),Rn.sample=Do,Rn.prototype.sample=function(e){return!this.__chain__&&e==null?Do(this.value()):this.thru(function(t){return Do(t,e)})},Rn.VERSION=t,ir(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Rn[e].placeholder=Rn}),ir(["dropWhile","filter","map","takeWhile"],function(e,t){var n=t!=g,r=t==v;Xn.prototype[e]=function(e,i){var s=this.__filtered__,o=s&&r?new Xn(this):this.clone(),u=o.__iteratees__||(o.__iteratees__=[]);return u.push({done:!1,count:0,index:0,iteratee:Wi(e,i,1),limit:-1,type:t}),o.__filtered__=s||n,o}}),ir(["drop","take"],function(e,t){var n=e+"While";Xn.prototype[e]=function(n){var r=this.__filtered__,i=r&&!t?this.dropWhile():this.clone();n=n==null?1:Cn(hn(n)||0,0);if(r)t?i.__takeCount__=kn(i.__takeCount__,n):Bs(i.__iteratees__).limit=n;else{var s=i.__views__||(i.__views__=[]);s.push({size:n,type:e+(i.__dir__<0?"Right":"")})}return i},Xn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},Xn.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[n](e,t).reverse()}}),ir(["first","last"],function(e,t){var n="take"+(t?"Right":"");Xn.prototype[e]=function(){return this[n](1).value()[0]}}),ir(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Xn.prototype[e]=function(){return this[n](1)}}),ir(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?Wr:$a;Xn.prototype[e]=function(e){return this[n](r(e))}}),Xn.prototype.compact=function(){return this.filter(Ia)},Xn.prototype.reject=function(e,t){return e=Wi(e,t,1),this.filter(function(t){return!e(t)})},Xn.prototype.slice=function(t,n){t=t==null?0:+t||0;var r=this;return t<0?r=this.takeRight(-t):t&&(r=this.drop(t)),n!==e&&(n=+n||0,r=n<0?r.dropRight(-n):r.take(n-t)),r},Xn.prototype.toArray=function(){return this.drop(0)},Br(Xn.prototype,function(e,t){var n=Rn[t];if(!n)return;var r=/^(?:filter|map|reject)|While$/.test(t),i=/^(?:first|last)$/.test(t);Rn.prototype[t]=function(){var t=arguments,s=this.__chain__,o=this.__wrapped__,u=!!this.__actions__.length,a=o instanceof Xn,f=t[0],l=a||mu(o);l&&r&&typeof f=="function"&&f.length!=1&&(a=l=!1);var c=a&&!u;if(i&&!s)return c?e.call(o):n.call(Rn,this.value());var h=function(e){var r=[e];return vn.apply(r,t),n.apply(Rn,r)};if(l){var p=c?o:new Xn(this),d=e.apply(p,t);if(!i&&(u||d.__actions__)){var v=d.__actions__||(d.__actions__=[]);v.push({func:oo,args:[h],thisArg:Rn})}return new zn(d,s)}return this.thru(h)}}),ir(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?Mt:At)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);Rn.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),Br(Xn.prototype,function(e,t){var n=Rn[t];if(n){var r=n.name,i=qn[r]||(qn[r]=[]);i.push({name:t,func:n})}}),qn[Bi(null,r).name]=[{name:"wrapper",func:null}],Xn.prototype.clone=Vn,Xn.prototype.reverse=$n,Xn.prototype.value=Jn,Rn.prototype.chain=uo,Rn.prototype.commit=ao,Rn.prototype.plant=fo,Rn.prototype.reverse=lo,Rn.prototype.toString=co,Rn.prototype.run=Rn.prototype.toJSON=Rn.prototype.valueOf=Rn.prototype.value=ho,Rn.prototype.collect=Rn.prototype.map,Rn.prototype.head=Rn.prototype.first,Rn.prototype.select=Rn.prototype.filter,Rn.prototype.tail=Rn.prototype.rest,Rn}var e,t="3.9.3",n=1,r=2,i=4,s=8,o=16,u=32,a=64,f=128,l=256,c=30,h="...",p=150,d=16,v=0,m=1,g=2,y="Expected a function",b="__lodash_placeholder__",w="[object Arguments]",E="[object Array]",S="[object Boolean]",x="[object Date]",T="[object Error]",N="[object Function]",C="[object Map]",k="[object Number]",L="[object Object]",A="[object RegExp]",O="[object Set]",M="[object String]",_="[object WeakMap]",D="[object ArrayBuffer]",P="[object Float32Array]",H="[object Float64Array]",B="[object Int8Array]",j="[object Int16Array]",F="[object Int32Array]",I="[object Uint8Array]",q="[object Uint8ClampedArray]",R="[object Uint16Array]",U="[object Uint32Array]",z=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,X=/(__e\(.*?\)|\b__t\)) \+\n'';/g,V=/&(?:amp|lt|gt|quot|#39|#96);/g,$=/[&<>"'`]/g,J=RegExp(V.source),K=RegExp($.source),Q=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,et=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,nt=/[.*+?^${}()|[\]\/\\]/g,rt=RegExp(nt.source),it=/[\u0300-\u036f\ufe20-\ufe23]/g,st=/\\(\\)?/g,ot=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ut=/\w*$/,at=/^0[xX]/,ft=/^\[object .+?Constructor\]$/,lt=/^\d+$/,ct=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,ht=/($^)/,pt=/['\n\r\u2028\u2029\\]/g,dt=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),vt=" 	\f\n\r\u2028\u2029",mt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],gt=-1,yt={};yt[P]=yt[H]=yt[B]=yt[j]=yt[F]=yt[I]=yt[q]=yt[R]=yt[U]=!0,yt[w]=yt[E]=yt[D]=yt[S]=yt[x]=yt[T]=yt[N]=yt[C]=yt[k]=yt[L]=yt[A]=yt[O]=yt[M]=yt[_]=!1;var bt={};bt[w]=bt[E]=bt[D]=bt[S]=bt[x]=bt[P]=bt[H]=bt[B]=bt[j]=bt[F]=bt[k]=bt[L]=bt[A]=bt[M]=bt[I]=bt[q]=bt[R]=bt[U]=!0,bt[T]=bt[N]=bt[C]=bt[O]=bt[_]=!1;var wt={leading:!1,maxWait:0,trailing:!1},Et={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},St={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},xt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Tt={"function":!0,object:!0},Nt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ct=Tt[typeof exports]&&exports&&!exports.nodeType&&exports,kt=Tt[typeof module]&&module&&!module.nodeType&&module,Lt=Ct&&kt&&typeof global=="object"&&global&&global.Object&&global,At=Tt[typeof self]&&self&&self.Object&&self,Ot=Tt[typeof window]&&window&&window.Object&&window,Mt=kt&&kt.exports===Ct&&Ct,_t=Lt||Ot!==(this&&this.window)&&Ot||At||this,en=Zt();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(_t._=en,define("lodash",[],function(){return en})):Ct&&kt?Mt?(kt.exports=en)._=en:Ct._=en:_t._=en}).call(this),define("datatypes/InputFieldTypes",["require","exports"],function(e,t){var n=function(){function e(){}return e.DYNAMIC_FIELD_LIST="dynamic_field_list",e.RICH_TEXT="rich_text",e.CODE_TEXT="code_text",e.SELECT="select",e.MULTI_SELECT="multi_select",e.FILE="file",e.FILE_LIST="file_list",e.PASSWORD="password",e.PASSWORD_REPEAT="password_repeat",e.NUMBER="number",e.EMAIL="EMAIL",e.IMAGE="IMAGE",e.DATE="date",e.HIDDEN="hidden",e.TEXT="text",e.BOOLEAN="boolean",e.TYPEAHEAD="typeahead",e.MULTILINE_TEXT="multiline_text",e.LABEL="label",e}();return n}),define("common/FormValidator",["require","exports","../controllers/InputFormController","../datatypes/InputFieldTypes","angular"],function(e,t,n,r){var i=function(){function e(){}return e.validate=function(e,t,i,s,o,u){switch(i.type){case r.FILE:i.required&&s&&(t==null||t.file==null||t.file.length==0)&&u("required"),t.file.length>o.maximumFileSize&&u("maxlength");return;case r.FILE_LIST:i.required&&s&&(t==null||t.length==0)&&u("required");if(t!=null)for(var a=0;a<t.length;a++){var f=t[a];if(f.file!=null&&f.file.length>o.maximumFileSize){u("maxlength");break}}return;case r.MULTI_SELECT:return}if(typeof t=="undefined"||t==null||t.toString().trim().length==0){i.required&&u("required");return}switch(i.type){case r.NUMBER:_.isNaN(parseFloat(t))&&u("number");break;case r.EMAIL:(!_.isString(t)||!t.search(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/))&&u("email");break;case r.PASSWORD_REPEAT:var l=e[i.property+n.PASSWORD_REPEAT_SUFFIX];(!_.isString(l)||l!=t)&&u("password_match")}},e}();return i}),define("controllers/InputFormController",["require","exports","lodash","../datatypes/InputFieldTypes","../common/FormValidator","../module","Recaptcha","angular"],function(e,t,n,r,i,s){function o(e){switch(e){case r.TEXT:return"text";case r.CODE_TEXT:return"codeText";case r.BOOLEAN:return"checkBox";case r.DATE:return"date";case r.EMAIL:return"email";case r.FILE:return"file";case r.FILE_LIST:return"fileList";case r.IMAGE:return"image";case r.LABEL:return"label";case r.MULTILINE_TEXT:return"multilineText";case r.MULTI_SELECT:return"multiSelect";case r.NUMBER:return"number";case r.PASSWORD:return"password";case r.RICH_TEXT:return"richText";case r.SELECT:return"select";case r.TYPEAHEAD:return"typeahead"}}var u=function(){function e(t,i,s,u,a,f,l,c){var h=this;this.scope=t,this.dialogService=i,this.object=a,this.definition=f,this.defer=l,this.sceService=s,this.serverConfiguration=u,this.resolver=c,this.scope.title=f.title,t.useCodemirror=n.some(f.fields,function(e){return e.type==r.CODE_TEXT}),t.submitError="",t.isApplying=!1,t.submitWithCaptcha=f.useCaptcha,t.okDisabled=function(e){return h.okDisabled(e)},t.codeMirrorDefaultOptions=e.getCodeMirrorDefaultOptions(),t.isNewObject=a===null,t.object=a!=null?n.cloneDeep(a):{},t.fieldValueSelected=function(e,t){return h.onFieldValueSelected(e,t)},t.getValue=function(e){return e.type===r.RICH_TEXT&&t.readOnly(e).length>0?s.trustAsHtml(a[e.property]):a[e.property]},t.getHelpText=function(t){return e.onGetHelpText(t)},t.fieldVisible=function(e){return e.visibleFunction?e.visibleFunction(t.object):!0},t.getFieldTemplate=function(e){return"./views/"+o(e.type)},t.readOnly=function(e){return e.readOnlyFunction?e.readOnlyFunction(t.object)?"readonly":"":e.readOnly?"readonly":""},t.submit=function(e){return h.onSubmit(e)},t.cancel=function(){return h.onCancel()},t.showDateTimeField=function(e,t){e.preventDefault(),e.stopPropagation(),t.isOpen=!0},this.initializeFields()}return e.prototype.okDisabled=function(e){return this.scope.isApplying||!n.isUndefined(e)&&e.$invalid},e.onGetHelpText=function(e){var t=e.helpText;return t==null&&(t=""),t},e.getCodeMirrorDefaultOptions=function(){return{mode:"text/html",lineNumbers:!0,lineWrapping:!0,indentWithTabs:!0,theme:"default",extraKeys:{F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}}}},e.prototype.onFieldValueSelected=function(e,t){var n=this.scope.object[e.property];switch(e.type){case r.SELECT:return t.value==n;case r.MULTI_SELECT:if(!n)return!1;for(var i=0;i<n.length;i++)if(n[i]==t.value)return!0;return!1;default:return!1}},e.prototype.processField=function(e){switch(e.type){case r.DYNAMIC_FIELD_LIST:this.processDynamicFields(e);break;case r.HIDDEN:break;default:this.addField(e)}},e.prototype.processDynamicFields=function(e){var t=this,r=this.scope.object[e.property];if(!n.isArray(r))return;n.forEach(r,function(r){var i=n.cloneDeep(r.field);i.property=e.property+"$"+i.property,i.dynamicSource=r,t.addField(i),t.scope.object[i.property]=r.value})},e.prototype.addField=function(t){if(t.type===r.PASSWORD_REPEAT){t=n.cloneDeep(t),t.type=r.PASSWORD,this.addSimpleField(t);var i=n.cloneDeep(t);i.property=t.property+e.PASSWORD_REPEAT_SUFFIX,i.inlineWithPrevious=!0,i.reference=t.property,i.type=r.PASSWORD_REPEAT,i.required=!1,this.addSimpleField(i)}else this.addSimpleField(t)},e.prototype.addSimpleField=function(e){this.scope.object.hasOwnProperty(e.property)||(n.isUndefined(e.defaultValue)?this.scope.object[e.property]="":this.scope.object[e.property]=e.defaultValue);var t=this.scope.fields;if(!e.inlineWithPrevious||t.length===0)t.push(e);else{var i=t[t.length-1];if(i.isGroup)i.children.push(e);else{var s={};s.isGroup=!0,s.type="",s.children=[],s.children.push(i),s.children.push(e),s.position=i.position,t[t.length-1]=s}}switch(e.type){case r.IMAGE:case r.FILE:this.scope.object[e.property]=null;break;case r.SELECT:if(n.isArray(e.selectValues)){var o=e.selectValues;o.length>0&&(this.scope.object[e.property]=o[0].value)}break;case r.DATE:e.isOpen=!1}e.visibleCondition&&e.visibleCondition.length>0?e.visibleFunction=new Function("obj","with(obj) { return "+e.visibleCondition+"; }"):e.visibleFunction=null,e.readOnlyCondition&&e.readOnlyCondition.length>0?e.readOnlyFunction=new Function("obj","with(obj) { return "+e.readOnlyCondition+"; }"):e.readOnlyFunction=null},e.prototype.initializeFields=function(){var e=this;this.scope.fields=[],n.forEach(this.definition.fields,function(t){e.processField(t)})},e.prototype.onCancel=function(){this.dialogService.hide("cancel")},e.prototype.onSubmit=function(t){var s=this;n.each(this.scope.fields,function(e){if(!s.scope.fieldVisible(e)||s.scope.readOnly(e))return;var n=s.scope.object[e.property],r=t[e.property];i.validate(s.scope.object,n,e,s.scope.isNewObject,s.serverConfiguration,function(e){r.$setValidity(e,!1)})});if(t.$invalid)return;n.each(this.scope.fields,function(e){e.dynamicSource&&(e.dynamicSource.value=s.scope.object[e.property])}),this.scope.submitWithCaptcha&&(this.scope.object["-RecaptchaChallenge-"]=Recaptcha.get_challenge(),this.scope.object["-RecaptchaResponse-"]=Recaptcha.get_response()),this.scope.submitError="",this.scope.isApplying=!0;try{var o=n.cloneDeep(this.scope.object);n.each(this.scope.fields,function(t){t.dynamicSource?delete o[t.property]:t.type==r.PASSWORD_REPEAT&&delete o[t.property+e.PASSWORD_REPEAT_SUFFIX]}),n.each(this.definition.fields,function(e){if(e.type==r.DYNAMIC_FIELD_LIST){var t=o[e.property];t!=null&&n.each(t,function(e){var t=e.field.property;e.field={},e.field.property=t})}});if(this.resolver==null){this.dialogService.hide(),this.defer.resolve(o);return}this.resolver(o).then(function(){s.scope.isApplying=!1,s.dialogService.hide(),s.defer!=null&&s.defer.resolve(o)},function(e){s.scope.isApplying=!1,s.scope.submitError=e,s.scope.submitWithCaptcha&&Recaptcha.reload()})}catch(u){this.scope.isApplying=!1,this.scope.submitError=u.toString()}},e.PASSWORD_REPEAT_SUFFIX="$Repeat",e}();return s.controller("inputForm",["$scope","$mdDialog","$sce","serverConfiguration","object","definition","defer","resolver",u]),u});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("controllers/DialogController",["require","exports","./InputFormController","../module","angular"],function(e,t,n,r){var i=function(e){function t(t,n,r,i,s){var o=this;e.call(this,t,n,r,i,t.configuration.object,t.definition,null,function(e){return o.successFunction(e)}),this.qService=s,this.dialogScope=t,t.submitError="",t.submitSuccess="",t.hasChanges=!1,t.changesApplied=!1,t.openForm=function(e){e.$setPristine(),t.changesApplied=!1,t.submitError="",t.submitSuccess=""},t.$watch("object",function(e,t){e!==t&&o.onDataChanged()},!0)}return __extends(t,e),t.prototype.okDisabled=function(t){return e.prototype.okDisabled.call(this,t)||!this.dialogScope.hasChanges},t.prototype.onDataChanged=function(){this.dialogScope.hasChanges=!0,this.dialogScope.submitError="",this.dialogScope.submitSuccess=""},t.prototype.successFunction=function(e){var t=this,n=this.qService.defer();return this.dialogScope.submit(e).then(function(e){t.dialogScope.hasChanges=!1,t.dialogScope.changesApplied=!0,t.dialogScope.submitSuccess=e.message,n.resolve()},function(e){return n.reject(e)}),n.promise},t}(n);return r.controller("dialog",["$scope","$mdDialog","$sce","serverConfiguration","commandProcessor","$q",i]),i}),define("controllers/InputFormMessageController",["require","exports","../module","angular"],function(e,t,n){var r=function(){function e(e,t,n,r,i){e.message=n,e.title=r,e.close=function(){t.hide(),i.resolve()}}return e}();n.controller("inputFormMessage",["$scope","$mdDialog","message","title","defer",r])}),define("controllers/InputFormQuestionController",["require","exports","../module","angular"],function(e,t,n){var r=function(){function e(e,t,n,r,i,s){e.message=n,e.title=r,e.submitError="",e.isApplying=!1,e.close=function(){s==null&&(t.hide(),i.resolve()),e.submitError="",e.isApplying=!0;var n=s();n.then(function(){t.hide(),e.isApplying=!1,i.resolve()},function(t){e.submitError=t,e.isApplying=!1})}}return e}();n.controller("inputFormQuestion",["$scope","$mdDialog","message","title","defer","resolver",r])}),define("directives/CkEditorDirective",["require","exports","lodash","../module","angular"],function(e,t,n,r){var i=function(){function e(){}return e}(),s=function(){function e(e,t,n,r,s,o,u){var a=this;this.smileIdToCode={},this.smileCodeToId={},this.configuration=s,this.options=new i,this.scope=e,this.friendlyFormatting=o,this.model=n,this.inputContainer=r,this.initializeSmiles(),r.setHasValue(!0),this.editor=u.appendTo(t[0],this.options),this.editor.on("change",function(){return a.applyChanges()}),this.editor.on("key",function(){return a.applyChanges()}),n.$render=function(){return a.render()}}return e.prototype.updateEditorState=function(e){this.inputContainer.setHasValue(!0),this.inputContainer.setInvalid(this.model.$invalid&&this.model.$touched)},e.prototype.render=function(){var e=this.model.$viewValue||"";e&&this.friendlyFormatting.getSmilesExpression()&&(e=this.friendlyFormatting.smilesToImg(e)),this.editor.setData(e),this.updateEditorState(e)},e.prototype.applyChanges=function(){var e=this;this.scope.$apply(function(){return e.setViewValue()})},e.prototype.setViewValue=function(){var e=this,t=this.editor.getData();this.friendlyFormatting.getSmilesExpression()!=null&&(t=t.replace(/<img\s+alt="([^"]*)"\s+src="[^"]*"\s+(?:style="[^"]*"\s+)?title="([^"]*)"\s+\/?>/gi,function(t,n,r){return!n||!r||n!=r?t:e.smileCodeToId.hasOwnProperty(n)?n:t})),this.model.$setViewValue(t),this.model.$setTouched(),this.updateEditorState(t)},e.prototype.initializeSmiles=function(){var e=this;if(!this.configuration.smilesBase||this.configuration.smilesBase.length===0||!this.configuration.smiles||this.configuration.smiles.length===0)return;this.options.smiley_path=this.configuration.smilesBase,this.options.smiley_descriptions=[],this.options.smiley_images=[],n.forEach(this.configuration.smiles,function(t){e.smileCodeToId[t.code]=t.id,e.smileIdToCode[t.id]=t.code,e.options.smiley_descriptions.push(t.code),e.options.smiley_images.push(t.id)})},e}();r.directive("ckEditor",["webFormsConfiguration","friendlyFormatting",function(t,n){return{require:["?ngModel","^?mdInputContainer"],restrict:"AE",replace:!1,scope:{options:"=",readonly:"="},link:function(r,i,o,u){e(["ckeditor"],function(e){return new s(r,i,u[0],u[1],t,n,e)})}}}])}),define("views/codemirror",[],function(){return'<div class="md-input CodeMirrorInput"></div>'}),define("directives/CodeMirrorDirective",["require","exports","../views/codemirror","../module","angular"],function(e,t,n,r){var i=function(){function e(e,t,n,r,i,s){var o=this;this.scope=e,this.model=r,this.inputContainer=s,_.isUndefined(e.options)&&(e.options={});var u=this.model.$viewValue||"";e.options.lineNumbers=!0,e.options.mode="htmlmixed",e.options.inputStyle="textarea",e.options.value=u,this.editor=this.createEditor(t,e.options,i),this.configOptionsWatcher(n.uiCodemirror||n.uiCodemirrorOpts),this.configNgModelLink(),this.configUiRefreshAttribute(n.uiRefresh),e.$on("CodeMirror",function(e,t){if(!_.isFunction(t))throw new Error("the CodeMirror event requires a callback function");t(o.editor)}),this.updateEditorState(u)}return e.prototype.createEditor=function(e,t,n){return new n(function(t){e.append(t)},t)},e.prototype.configOptionsWatcher=function(e){var t=this;if(!e)return;var n=Object.keys(CodeMirror.CodeMirror.defaults);this.scope.$watch("options",function(e,r){if(!_.isObject(e))return;n.forEach(function(n){if(e.hasOwnProperty(n)){if(r&&e[n]===r[n])return;t.editor.setOption(n,e[n])}})},!0)},e.prototype.updateEditorState=function(e){this.inputContainer.setHasValue(!_.isEmpty(e)),this.inputContainer.setInvalid(this.model.$invalid&&this.model.$touched)},e.prototype.configNgModelLink=function(){var e=this;if(!this.model)return;this.model.$formatters.push(function(e){if(angular.isUndefined(e)||e===null)return"";if(angular.isObject(e)||angular.isArray(e))throw new Error("ui-codemirror cannot use an object or an array as a model");return e}),this.model.$render=function(){var t=e.model.$viewValue||"";e.editor.setValue(t),e.updateEditorState(t)},this.editor.on("change",function(t){var n=t.getValue();n!==e.model.$viewValue&&e.scope.$evalAsync(function(){e.model.$setViewValue(n),e.model.$setTouched(),e.updateEditorState(n)})}),this.editor.on("focus",function(){e.inputContainer.setFocused(!0)}),this.editor.on("blur",function(){e.inputContainer.setFocused(!1)})},e.prototype.configUiRefreshAttribute=function(e){var t=this;if(!e)return;this.scope.$watch(e,function(e,n){e!==n&&t.scope.$evalAsync(function(){t.editor.refresh()})})},e}();r.directive("uiCodemirror",["webFormsConfiguration",function(t){return{restrict:"E",template:n,replace:!0,require:["?ngModel","^?mdInputContainer"],scope:{options:"=",readonly:"="},link:function(n,r,s,o){var u=["codemirror"];t.codeMirrorModules&&t.codeMirrorModules.length&&(u=_.union(u,t.codeMirrorModules)),e(u,function(e){new i(n,r,s,o[0],e,o[1])})}}}])}),define("views/webDialog",[],function(){return'<div ng-form="form"><div ng-if="!changesApplied"><md-content layout-padding="layout-padding" layout="column"><div ng-repeat="field in fields | orderBy: \'position\'"><input-field field="field" object="object" form="form" ng-if="fieldVisible(field) &amp;&amp; !field.isGroup"></input-field><div ng-if="field.isGroup" layout="row" layout-sm="column"><input-field ng-repeat="child in field.children" field="child" object="object" form="form" ng-if="fieldVisible(child)" flex=""></input-field></div></div><div ng-if="submitWithCaptcha" captcha="recaptchaPublicKey"></div><div ng-if="submitError.length &gt; 0" class="bg-danger dialog-notification"><span class="glyphicon glyphicon-exclamation-sign"></span><span ng-bind="submitError"></span></div><div ng-if="submitSuccess.length &gt; 0" class="bg-success dialog-notification"><span class="glyphicon glyphicon-ok-circle"></span><span ng-bind="submitSuccess"></span></div></md-content><md-content layout-padding="layout-padding"><md-button ng-click="submit(form)" ng-disabled="okDisabled(form)" class="md-raised md-primary"><span ng-bind="applyCaption | translate"></span><md-progress-circular ng-show="isApplying" md-mode="indeterminate" md-diameter="10"></md-progress-circular></md-button></md-content></div><div ng-if="changesApplied"><div ng-bind="submitSuccess" class="bg-success dialog-notification"></div><md-content layout-padding="layout-padding"><md-button ng-click="openForm(form)" ng-bind="\'Main.OpenForm\' | translate" aria-label="Open" class="md-raised"></md-button></md-content></div></div>'}),define("directives/DialogDirective",["require","exports","../views/webDialog","../module","../controllers/DialogController","angular"],function(e,t,n,r,i){r.directive("lmDialog",[function(){return{template:n,restrict:"E",replace:!1,scope:{configuration:"="},controller:i}}])}),define("views/fileRead",[],function(){return'<input type="file" style="display: none"/><md-button ng-click="chooseFile()">{{ \'Main.ChooseFile\' | translate }}</md-button><md-button ng-click="clear()">{{ \'Main.ClearFile\' | translate }}</md-button><span>{{comment}}</span>'}),define("directives/FileReadDirective",["require","exports","../module","../views/fileRead","angular"],function(e,t,n,r){var i=function(){function e(e,t){var n=this;this.scope=e;var r=t.find("file");e.chooseFile=function(){return r.click()},e.clear=function(){r.val(""),r.html(""),e.value=null},r.bind("change",function(e){return n.onFileSelected(e)})}return e.prototype.onFileSelected=function(e){var t=this;this.scope.comment=e.target.value[0].name;var n=new FileReader;n.onload=function(n){t.scope.$apply(function(){return t.onReadFinished(n,e)})},n.readAsDataURL(e.target.value[0])},e.prototype.onReadFinished=function(e,t){var n=e.target.result,r=n.indexOf("base64,");r>0&&(n=n.substring(r+7)),this.scope.value={file:n,type:t.target.value[0].type,name:t.target.value[0].name,id:null}},e}();n.directive("fileRead",[function(){return{template:r,restrict:"E",replace:!1,scope:{value:"="},link:i}}])}),define("views/multiFileRead",[],function(){return'<ul class="file-choose-list"><li ng-foreach="file in value.files"><span>{{file.name}}</span><span ng-click="removeFile(file)" class="file-remove glyphicon glyphicon-remove"></span></li></ul><input type="file" style="display: none" multiple="multiple"/><md-button>{{ \'Main.ChooseFile\' | translate }}</md-button>'}),define("datatypes/FileReadResponse",function(){}),define("directives/MultiFileReadDirective",["require","exports","../module","../views/multiFileRead","../datatypes/FileReadResponse","angular"],function(e,t,n,r){var i=function(){function e(){}return e}(),s=function(){function e(e,t){var n=this;this.fileId=1,this.scope=e,e.value==null?(e.value=new i,this.fileReadBefore=0):this.fileReadBefore=e.value.files.length,e.value.files=[],this.fileElement=t.find("file"),e.chooseFile=function(){return n.fileElement.click()},this.fileElement.bind("change",function(e){return n.onFilesSelected(e)}),e.removeFile=function(t){for(var n=0;n<e.value.files.length;n++)if(e.value.files[n].id==t.id){e.value.files.splice(n,1);break}}}return e.prototype.onFilesSelected=function(e){var t=e.target.files;for(var n=0;n<t.length;n++){var r=t[n];this.readFile(r,e,t)}},e.prototype.onReadFinished=function(e,t,n){var r=e.target.result,i=r.indexOf("base64,");i>0&&(r=r.substring(i+7));var s={file:r,type:t.type,name:t.name,id:this.fileId++};this.scope.value.files.push(s),this.scope.value.files.length-this.fileReadBefore==n.length&&this.fileElement.val("")},e.prototype.readFile=function(e,t,n){var r=this,i=new FileReader;i.onload=function(){r.scope.$apply(function(){return r.onReadFinished(t,e,n)})},i.readAsDataURL(e)},e}();n.directive("multiFileRead",[function(){return{template:r,restrict:"E",replace:!1,scope:{value:"="},link:s}}])}),function(e,t){typeof define=="function"&&define.amd?define("autolinker",[],function(){return e.Autolinker=t()}):typeof exports=="object"?module.exports=t():e.Autolinker=t()}(this,function(){var e=function(t){e.Util.assign(this,t);var n=this.hashtag;if(n!==!1&&n!=="twitter"&&n!=="facebook")throw new Error("invalid `hashtag` cfg - see docs")};return e.prototype={constructor:e,urls:!0,email:!0,twitter:!0,phone:!0,hashtag:!1,newWindow:!0,stripPrefix:!0,truncate:undefined,className:"",htmlParser:undefined,matchParser:undefined,tagBuilder:undefined,link:function(e){if(!e)return"";var t=this.getHtmlParser(),n=t.parse(e),r=0,i=[];for(var s=0,o=n.length;s<o;s++){var u=n[s],a=u.getType(),f=u.getText();if(a==="element")u.getTagName()==="a"&&(u.isClosing()?r=Math.max(r-1,0):r++),i.push(f);else if(a==="entity"||a==="comment")i.push(f);else if(r===0){var l=this.linkifyStr(f);i.push(l)}else i.push(f)}return i.join("")},linkifyStr:function(e){return this.getMatchParser().replace(e,this.createMatchReturnVal,this)},createMatchReturnVal:function(t){var n;this.replaceFn&&(n=this.replaceFn.call(this,this,t));if(typeof n=="string")return n;if(n===!1)return t.getMatchedText();if(n instanceof e.HtmlTag)return n.toAnchorString();var r=this.getTagBuilder(),i=r.build(t);return i.toAnchorString()},getHtmlParser:function(){var t=this.htmlParser;return t||(t=this.htmlParser=new e.htmlParser.HtmlParser),t},getMatchParser:function(){var t=this.matchParser;return t||(t=this.matchParser=new e.matchParser.MatchParser({urls:this.urls,email:this.email,twitter:this.twitter,phone:this.phone,hashtag:this.hashtag,stripPrefix:this.stripPrefix})),t},getTagBuilder:function(){var t=this.tagBuilder;return t||(t=this.tagBuilder=new e.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),t}},e.link=function(t,n){var r=new e(n);return r.link(t)},e.match={},e.htmlParser={},e.matchParser={},e.Util={abstractMethod:function(){throw"abstract"},trimRegex:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,assign:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},extend:function(t,n){var r=t.prototype,i=function(){};i.prototype=r;var s;n.hasOwnProperty("constructor")?s=n.constructor:s=function(){r.constructor.apply(this,arguments)};var o=s.prototype=new i;return o.constructor=s,o.superclass=r,delete n.constructor,e.Util.assign(o,n),s},ellipsis:function(e,t,n){return e.length>t&&(n=n==null?"..":n,e=e.substring(0,t-n.length)+n),e},indexOf:function(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},splitAndCapture:function(e,t){if(!t.global)throw new Error("`splitRegex` must have the 'g' flag set");var n=[],r=0,i;while(i=t.exec(e))n.push(e.substring(r,i.index)),n.push(i[0]),r=i.index+i[0].length;return n.push(e.substring(r)),n},trim:function(e){return e.replace(this.trimRegex,"")}},e.HtmlTag=e.Util.extend(Object,{whitespaceRegex:/\s+/,constructor:function(t){e.Util.assign(this,t),this.innerHtml=this.innerHtml||this.innerHTML},setTagName:function(e){return this.tagName=e,this},getTagName:function(){return this.tagName||""},setAttr:function(e,t){var n=this.getAttrs();return n[e]=t,this},getAttr:function(e){return this.getAttrs()[e]},setAttrs:function(t){var n=this.getAttrs();return e.Util.assign(n,t),this},getAttrs:function(){return this.attrs||(this.attrs={})},setClass:function(e){return this.setAttr("class",e)},addClass:function(t){var n=this.getClass(),r=this.whitespaceRegex,i=e.Util.indexOf,s=n?n.split(r):[],o=t.split(r),u;while(u=o.shift())i(s,u)===-1&&s.push(u);return this.getAttrs()["class"]=s.join(" "),this},removeClass:function(t){var n=this.getClass(),r=this.whitespaceRegex,i=e.Util.indexOf,s=n?n.split(r):[],o=t.split(r),u;while(s.length&&(u=o.shift())){var a=i(s,u);a!==-1&&s.splice(a,1)}return this.getAttrs()["class"]=s.join(" "),this},getClass:function(){return this.getAttrs()["class"]||""},hasClass:function(e){return(" "+this.getClass()+" ").indexOf(" "+e+" ")!==-1},setInnerHtml:function(e){return this.innerHtml=e,this},getInnerHtml:function(){return this.innerHtml||""},toAnchorString:function(){var e=this.getTagName(),t=this.buildAttrsStr();return t=t?" "+t:"",["<",e,t,">",this.getInnerHtml(),"</",e,">"].join("")},buildAttrsStr:function(){if(!this.attrs)return"";var e=this.getAttrs(),t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+'="'+e[n]+'"');return t.join(" ")}}),e.AnchorTagBuilder=e.Util.extend(Object,{constructor:function(t){e.Util.assign(this,t)},build:function(t){var n=new e.HtmlTag({tagName:"a",attrs:this.createAttrs(t.getType(),t.getAnchorHref()),innerHtml:this.processAnchorText(t.getAnchorText())});return n},createAttrs:function(e,t){var n={href:t},r=this.createCssClass(e);return r&&(n["class"]=r),this.newWindow&&(n.target="_blank"),n},createCssClass:function(e){var t=this.className;return t?t+" "+t+"-"+e:""},processAnchorText:function(e){return e=this.doTruncate(e),e},doTruncate:function(t){return e.Util.ellipsis(t,this.truncate||Number.POSITIVE_INFINITY)}}),e.htmlParser.HtmlParser=e.Util.extend(Object,{htmlRegex:function(){var e=/!--([\s\S]+?)--/,t=/[0-9a-zA-Z][0-9a-zA-Z:]*/,n=/[^\s\0"'>\/=\x01-\x1F\x7F]+/,r=/(?:"[^"]*?"|'[^']*?'|[^'"=<>`\s]+)/,i=n.source+"(?:\\s*=\\s*"+r.source+")?";return new RegExp(["(?:","<(!DOCTYPE)","(?:","\\s+","(?:",i,"|",r.source+")",")*",">",")","|","(?:","<(/)?","(?:",e.source,"|","(?:","("+t.source+")","(?:","\\s+",i,")*","\\s*/?",")",")",">",")"].join(""),"gi")}(),htmlCharacterEntitiesRegex:/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,parse:function(e){var t=this.htmlRegex,n,r=0,i,s=[];while((n=t.exec(e))!==null){var o=n[0],u=n[3],a=n[1]||n[4],f=!!n[2],l=e.substring(r,n.index);l&&(i=this.parseTextAndEntityNodes(l),s.push.apply(s,i)),u?s.push(this.createCommentNode(o,u)):s.push(this.createElementNode(o,a,f)),r=n.index+o.length}if(r<e.length){var c=e.substring(r);c&&(i=this.parseTextAndEntityNodes(c),s.push.apply(s,i))}return s},parseTextAndEntityNodes:function(t){var n=[],r=e.Util.splitAndCapture(t,this.htmlCharacterEntitiesRegex);for(var i=0,s=r.length;i<s;i+=2){var o=r[i],u=r[i+1];o&&n.push(this.createTextNode(o)),u&&n.push(this.createEntityNode(u))}return n},createCommentNode:function(t,n){return new e.htmlParser.CommentNode({text:t,comment:e.Util.trim(n)})},createElementNode:function(t,n,r){return new e.htmlParser.ElementNode({text:t,tagName:n.toLowerCase(),closing:r})},createEntityNode:function(t){return new e.htmlParser.EntityNode({text:t})},createTextNode:function(t){return new e.htmlParser.TextNode({text:t})}}),e.htmlParser.HtmlNode=e.Util.extend(Object,{text:"",constructor:function(t){e.Util.assign(this,t)},getType:e.Util.abstractMethod,getText:function(){return this.text}}),e.htmlParser.CommentNode=e.Util.extend(e.htmlParser.HtmlNode,{comment:"",getType:function(){return"comment"},getComment:function(){return this.comment}}),e.htmlParser.ElementNode=e.Util.extend(e.htmlParser.HtmlNode,{tagName:"",closing:!1,getType:function(){return"element"},getTagName:function(){return this.tagName},isClosing:function(){return this.closing}}),e.htmlParser.EntityNode=e.Util.extend(e.htmlParser.HtmlNode,{getType:function(){return"entity"}}),e.htmlParser.TextNode=e.Util.extend(e.htmlParser.HtmlNode,{getType:function(){return"text"}}),e.matchParser.MatchParser=e.Util.extend(Object,{urls:!0,email:!0,twitter:!0,phone:!0,hashtag:!1,stripPrefix:!0,matcherRegex:function(){var e=/(^|[^\w])@(\w{1,15})/,t=/(^|[^\w])#(\w{1,139})/,n=/(?:[\-;:&=\+\$,\w\.]+@)/,r=/(?:\+?\d{1,3}[-\s.])?\(?\d{3}\)?[-\s.]?\d{3}[-\s.]\d{4}/,i=/(?:[A-Za-z][-.+A-Za-z0-9]+:(?![A-Za-z][-.+A-Za-z0-9]+:\/\/)(?!\d+\/?)(?:\/\/)?)/,s=/(?:www\.)/,o=/[A-Za-z0-9\.\-]*[A-Za-z0-9\-]/,u=/\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b/,a=/[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]?!:,.;]*[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]]/;return new RegExp(["(",e.source,")","|","(",n.source,o.source,u.source,")","|","(","(?:","(",i.source,o.source,")","|","(?:","(.?//)?",s.source,o.source,")","|","(?:","(.?//)?",o.source,u.source,")",")","(?:"+a.source+")?",")","|","(",r.source,")","|","(",t.source,")"].join(""),"gi")}(),charBeforeProtocolRelMatchRegex:/^(.)?\/\//,constructor:function(t){e.Util.assign(this,t),this.matchValidator=new e.MatchValidator},replace:function(e,t,n){var r=this;return e.replace(this.matcherRegex,function(e,i,s,o,u,a,f,l,c,h,p,d,v){var m=r.processCandidateMatch(e,i,s,o,u,a,f,l,c,h,p,d,v);if(!m)return e;var g=t.call(n,m.match);return m.prefixStr+g+m.suffixStr})},processCandidateMatch:function(t,n,r,i,s,o,u,a,f,l,c,h,p){var d=a||f,v,m="",g="";if(o&&!this.urls||s&&!this.email||l&&!this.phone||n&&!this.twitter||c&&!this.hashtag||!this.matchValidator.isValidMatch(o,u,d))return null;if(this.matchHasUnbalancedClosingParen(t))t=t.substr(0,t.length-1),g=")";else{var y=this.matchHasInvalidCharAfterTld(o,u);y>-1&&(g=t.substr(y),t=t.substr(0,y))}if(s)v=new e.match.Email({matchedText:t,email:s});else if(n)r&&(m=r,t=t.slice(1)),v=new e.match.Twitter({matchedText:t,twitterHandle:i});else if(l){var b=t.replace(/\D/g,"");v=new e.match.Phone({matchedText:t,number:b})}else if(c)h&&(m=h,t=t.slice(1)),v=new e.match.Hashtag({matchedText:t,serviceName:this.hashtag,hashtag:p});else{if(d){var w=d.match(this.charBeforeProtocolRelMatchRegex)[1]||"";w&&(m=w,t=t.slice(1))}v=new e.match.Url({matchedText:t,url:t,protocolUrlMatch:!!u,protocolRelativeMatch:!!d,stripPrefix:this.stripPrefix})}return{prefixStr:m,suffixStr:g,match:v}},matchHasUnbalancedClosingParen:function(e){var t=e.charAt(e.length-1);if(t===")"){var n=e.match(/\(/g),r=e.match(/\)/g),i=n&&n.length||0,s=r&&r.length||0;if(i<s)return!0}return!1},matchHasInvalidCharAfterTld:function(e,t){if(!e)return-1;var n=0;t&&(n=e.indexOf(":"),e=e.slice(n));var r=/^((.?\/\/)?[A-Za-z0-9\.\-]*[A-Za-z0-9\-]\.[A-Za-z]+)/,i=r.exec(e);return i===null?-1:(n+=i[1].length,e=e.slice(i[1].length),/^[^.A-Za-z:\/?#]/.test(e)?n:-1)}}),e.MatchValidator=e.Util.extend(Object,{invalidProtocolRelMatchRegex:/^[\w]\/\//,hasFullProtocolRegex:/^[A-Za-z][-.+A-Za-z0-9]+:\/\//,uriSchemeRegex:/^[A-Za-z][-.+A-Za-z0-9]+:/,hasWordCharAfterProtocolRegex:/:[^\s]*?[A-Za-z]/,isValidMatch:function(e,t,n){return t&&!this.isValidUriScheme(t)||this.urlMatchDoesNotHaveProtocolOrDot(e,t)||this.urlMatchDoesNotHaveAtLeastOneWordChar(e,t)||this.isInvalidProtocolRelativeMatch(n)?!1:!0},isValidUriScheme:function(e){var t=e.match(this.uriSchemeRegex)[0].toLowerCase();return t!=="javascript:"&&t!=="vbscript:"},urlMatchDoesNotHaveProtocolOrDot:function(e,t){return!!e&&(!t||!this.hasFullProtocolRegex.test(t))&&e.indexOf(".")===-1},urlMatchDoesNotHaveAtLeastOneWordChar:function(e,t){return e&&t?!this.hasWordCharAfterProtocolRegex.test(e):!1},isInvalidProtocolRelativeMatch:function(e){return!!e&&this.invalidProtocolRelMatchRegex.test(e)}}),e.match.Match=e.Util.extend(Object,{constructor:function(t){e.Util.assign(this,t)},getType:e.Util.abstractMethod,getMatchedText:function(){return this.matchedText},getAnchorHref:e.Util.abstractMethod,getAnchorText:e.Util.abstractMethod}),e.match.Email=e.Util.extend(e.match.Match,{getType:function(){return"email"},getEmail:function(){return this.email},getAnchorHref:function(){return"mailto:"+this.email},getAnchorText:function(){return this.email}}),e.match.Hashtag=e.Util.extend(e.match.Match,{getType:function(){return"hashtag"},getHashtag:function(){return this.hashtag},getAnchorHref:function(){var e=this.serviceName,t=this.hashtag;switch(e){case"twitter":return"https://twitter.com/hashtag/"+t;case"facebook":return"https://www.facebook.com/hashtag/"+t;default:throw new Error("Unknown service name to point hashtag to: ",e)}},getAnchorText:function(){return"#"+this.hashtag}}),e.match.Phone=e.Util.extend(e.match.Match,{getType:function(){return"phone"},getNumber:function(){return this.number},getAnchorHref:function(){return"tel:"+this.number},getAnchorText:function(){return this.matchedText}}),e.match.Twitter=e.Util.extend(e.match.Match,{getType:function(){return"twitter"},getTwitterHandle:function(){return this.twitterHandle},getAnchorHref:function(){return"https://twitter.com/"+this.twitterHandle},getAnchorText:function(){return"@"+this.twitterHandle}}),e.match.Url=e.Util.extend(e.match.Match,{urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,protocolRelativeRegex:/^\/\//,protocolPrepended:!1,getType:function(){return"url"},getUrl:function(){var e=this.url;return!this.protocolRelativeMatch&&!this.protocolUrlMatch&&!this.protocolPrepended&&(e=this.url="http://"+e,this.protocolPrepended=!0),e},getAnchorHref:function(){var e=this.getUrl();return e.replace(/&amp;/g,"&")},getAnchorText:function(){var e=this.getUrl();return this.protocolRelativeMatch&&(e=this.stripProtocolRelativePrefix(e)),this.stripPrefix&&(e=this.stripUrlPrefix(e)),e=this.removeTrailingSlash(e),e},stripUrlPrefix:function(e){return e.replace(this.urlPrefixRegex,"")},stripProtocolRelativePrefix:function(e){return e.replace(this.protocolRelativeRegex,"")},removeTrailingSlash:function(e){return e.charAt(e.length-1)==="/"&&(e=e.slice(0,-1)),e}}),e}),define("services/FriendlyFormattingService",["require","exports","autolinker","../module","angular"],function(e,t,n,r){var i=function(){function e(e){this.smiles={},this.smilesString="",this.smilesBase=e.smilesBase,this.autoLinker=new n,this.autoLinker.newWindow=!1,this.autoLinker.truncate=30;for(var t=0;t<e.smiles.length;t++){var r=e.smiles[t];this.smiles[r.code]=r.id,this.smilesString.length>0&&(this.smilesString+="|");for(var i=0;i<r.code.length;i++){switch(r.code[i]){case"(":case")":case"[":case"]":case"-":case"?":case"|":this.smilesString+="\\"}this.smilesString+=r.code[i]}}this.smilesString.length>0?this.smilesExpression=new RegExp(this.smilesString,"g"):this.smilesExpression=null}return e.prototype.getSmilesExpression=function(){return this.smilesExpression},e.prototype.getSmileUrl=function(e){return!e.length||!this.smilesBase?"":'<img alt="'+e+'" src="'+this.smilesBase+this.smiles[e]+'" title="'+e+'" />'},e.prototype.smilesToImg=function(e){return this.smilesExpression!=null&&(e=e.replace(/([^<>]*)(<[^<>]*>)/gi,function(e,t,n){return!t||t.length==0?e:(t=t.replace(this.smilesExpression,this.getSmileUrl),n?t+n:t)})),e},e.prototype.getFriendlyHtml=function(e){return e==null||e.length==0?e:(e=this.smilesToImg(e),this.autoLinker.link(e))},e}();return r.service("friendlyFormatting",["webFormsConfiguration",i]),i}),define("views/webForm",[],function(){return'<md-dialog ng-form="form" aria-label="{{title}}" flex="80"><md-dialog-content><md-subheader>{{title}}</md-subheader></md-dialog-content><md-content layout-padding="layout-padding" layout="column"><div ng-repeat="field in fields | orderBy: \'position\'"><input-field field="field" object="object" form="form" ng-if="fieldVisible(field) &amp;&amp; !field.isGroup"></input-field><div ng-if="field.isGroup" layout="row" layout-sm="column"><input-field ng-repeat="child in field.children" field="child" object="object" form="form" ng-if="fieldVisible(child)" flex=""></input-field></div></div><div ng-if="submitWithCaptcha" captcha="recaptchaPublicKey"></div><div ng-if="submitError.length &gt; 0" class="bg-danger dialog-notification"><span class="glyphicon glyphicon-exclamation-sign"></span><span ng-bind="submitError"></span></div><div ng-if="submitSuccess.length &gt; 0" class="bg-success dialog-notification"><span class="glyphicon glyphicon-ok-circle"></span><span ng-bind="submitSuccess"></span></div></md-content><div class="md-actions"><md-button ng-click="submit(form)" ng-disabled="okDisabled(form)" aria-label="OK" class="md-raised md-primary"><span>{{ \'Main.ButtonOk\' | translate }}</span><md-progress-circular ng-show="isApplying" md-mode="indeterminate" md-diameter="10"></md-progress-circular></md-button><md-button ng-click="cancel()" ng-disabled="isApplying" class="md-raised">{{ \'Main.ButtonCancel\' | translate }}</md-button></div></md-dialog>'}),define("views/webFormQuestion",[],function(){return'<div class="modal-header"><h3 class="modal-title">{{title}}</h3></div><div class="modal-body"><p>{{message}}</p></div><div class="modal-footer"><div ng-if="submitError.length &gt; 0" class="bg-danger dialog-notification"><span class="glyphicon glyphicon-exclamation-sign"></span><span ng-bind="submitError"></span></div><md-button ng-click="submit()" class="md-raised"><span>{{ \'Main.ButtonYes\' | translate }}</span><md-progress-circular ng-show="isApplying" md-mode="indeterminate"></md-progress-circular></md-button><md-button ng-click="cancel()" class="md-raised md-warn">{{ \'Main.ButtonNo\' | translate }}</md-button></div>'}),define("views/webFormMessage",[],function(){return'<md-dialog aria-label="{{title}}" class="input-form"><md-dialog-content><md-subheader>{{title}}</md-subheader></md-dialog-content><md-content><p>{{message}}</p></md-content><div class="md-actions"><md-button ng-click="close()" class="md-primary">{{ \'Main.ButtonOk\' | translate }}</md-button></div></md-dialog>'}),define("services/WebFormsService",["require","exports","../views/webForm","../views/webFormQuestion","../views/webFormMessage","../datatypes/InputFieldTypes","angular"],function(e,t,n,r,i,s){var o=function(){function t(e,t,n,r){this.httpService=e,this.qService=t,this.cache=n("lm-webforms"),this.dialogService=r}return t.prototype.newObject=function(e,t,n){return t===void 0&&(t=null),n===void 0&&(n=null),this.getTemplateAndExecute(e,t,!0,n)},t.prototype.editObject=function(e,t,n){return n===void 0&&(n=null),this.getTemplateAndExecute(e,t,!1,n)},t.prototype.question=function(e,t,n){n===void 0&&(n=null);var i=this.qService.defer();return this.dialogService.show({template:r,locals:{message:e,title:t,defer:i,resolver:n},controller:"inputFormQuestion"}).catch(function(){i.reject()}),i.promise},t.prototype.message=function(e,t){t===void 0&&(t=null);var n=this.qService.defer();return this.dialogService.show({template:i,locals:{message:e,title:t,defer:n},controller:"inputFormMessage"}),n.promise},t.prototype.getTemplateAndExecute=function(e,t,n,r){var i=this;r===void 0&&(r=null);var s=this.qService.defer();return this.httpService.get(e,{cache:this.cache}).then(function(e){i.executeWithDefinitionLoaded(JSON.parse(e),t,n,s,r)},function(e){return s.reject(e)}),s.promise},t.fillRichTextModules=function(e){e.push("scripts/directives/CkEditorDirective")},t.fillCodeTextModules=function(e){e.push("scripts/directives/CodeMirrorDirective")},t.prototype.executeWithDefinitionLoaded=function(n,r,i,o,u){var a=this,f=!1,l=!1,c=!1;_.forOwn(r.fields,function(e,t){e.property=t});var h=[];_.forEach(r.fields,function(e){switch(e.type){case s.DYNAMIC_FIELD_LIST:c=!0;break;case s.RICH_TEXT:f||(f=!0,t.fillRichTextModules(h));break;case s.CODE_TEXT:l||(l=!0,t.fillCodeTextModules(h))}}),c&&n==null&&o.reject("Cannot edit uninitialized object"),h.length>0?e(h,function(){a.executeWithDefinitionAndModulesLoaded(n,r,i,o,u)}):this.executeWithDefinitionAndModulesLoaded(n,r,i,o,u)},t.prototype.executeWithDefinitionAndModulesLoaded=function(e,t,r,i,s){s===void 0&&(s=null),this.dialogService.show({template:n,locals:{object:e,definition:t,defer:i,resolver:s,isNew:r},controller:"inputForm"}).catch(function(){i.reject("Cancelled")})},t}();return o}),define("datatypes/WebFormsConfiguration",["require","exports"],function(e,t){var n=function(){function e(){this.codeMirrorModules=[],this.smilesBase=null,this.smiles=[],this.maximumFileSize=0}return e}();return n}),define("services/WebFormsServiceProvider",["require","exports","../module","./WebFormsService","../datatypes/WebFormsConfiguration","angular"],function(e,t,n,r,i){var s=new i;n.value("webFormsConfiguration",s);var o=function(){function e(){this.$get=["$http","$q","$cacheFactory","$mdDialog",function(e,t,n,i){return new r(e,t,n,i)}]}return e}();n.provider("webForms",[o])}),define("lm-webforms",["require","exports","angular","./controllers/DialogController","./controllers/InputFormController","./controllers/InputFormMessageController","./controllers/InputFormQuestionController","./directives/CkEditorDirective","./directives/CodeMirrorDirective","./directives/DialogDirective","./directives/FileReadDirective","./directives/MultiFileReadDirective","./services/FriendlyFormattingService","./services/WebFormsServiceProvider"],function(e,t){});