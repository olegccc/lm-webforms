define("datatypes/InputFieldTypes",["require","exports"],function(a,b){var c=function(){function a(){}return a.DYNAMIC_FIELD_LIST="dynamic_field_list",a.RICH_TEXT="rich_text",a.CODE_TEXT="code_text",a.SELECT="select",a.MULTI_SELECT="multi_select",a.FILE="file",a.FILE_LIST="file_list",a.PASSWORD="password",a.PASSWORD_REPEAT="password_repeat",a.NUMBER="number",a.EMAIL="email",a.IMAGE="image",a.DATE="date",a.HIDDEN="hidden",a.TEXT="text",a.BOOLEAN="boolean",a.TYPEAHEAD="typeahead",a.MULTILINE_TEXT="multiline_text",a.LABEL="label",a}();return c}),define("datatypes/Constants",["require","exports"],function(a,b){var c=function(){function a(){}return a.PASSWORD_REPEAT_SUFFIX="$Repeat",a}();return c}),define("common/FormValidator",["require","exports","datatypes/Constants","datatypes/InputFieldTypes","angular"],function(a,b,c,d){var e=function(){function a(){}return a.validate=function(a,b,e,f,g,h){switch(e.type){case d.FILE:return e.required&&f&&(null===b||null===b.file||0===b.file.length)&&h("required"),void(g.maximumFileSize>0&&null!==b&&b.file.length>g.maximumFileSize&&h("maxlength"));case d.FILE_LIST:if(e.required&&f&&(null===b||0===b.length)&&h("required"),null!==b)for(var i=0;i<b.length;i++){var j=b[i];if(null!==j.file&&j.file.length>g.maximumFileSize){h("maxlength");break}}return;case d.MULTI_SELECT:return}if("undefined"==typeof b||null===b||0===b.toString().trim().length)return void(e.required&&h("required"));switch(e.type){case d.NUMBER:_.isNaN(parseFloat(b))&&h("number");break;case d.EMAIL:_.isString(b)&&b.search(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/)||h("email");break;case d.PASSWORD_REPEAT:var k=a[e.property+c.PASSWORD_REPEAT_SUFFIX];_.isString(k)&&k===b||h("password_match")}},a}();return e}),define("modules/WebFormsModule",["require","exports","angular","angular.material","angular.animate","angular.touch","angular.translate"],function(a,b){var c=angular.module("lm-webforms",["ngMaterial","ngTouch","ngMessages","ngAnimate","pascalprecht.translate"]);return c}),define("controllers/InputFormController",["require","exports","lodash","datatypes/InputFieldTypes","common/FormValidator","datatypes/Constants","modules/WebFormsModule","Recaptcha","angular"],function(a,b,c,d,e,f,g){var h=function(){function a(b,e,f,g,h,i,j,k){var l=this;this.scope=b,this.dialogService=e,this.object=h,this.definition=i,this.defer=j,this.sceService=f,this.configuration=g,this.resolver=k,this.scope.title=i.title,b.useCodemirror=c.some(i.fields,function(a){return a.type==d.CODE_TEXT}),b.submitError="",b.isApplying=!1,b.submitWithCaptcha=i.useCaptcha,b.okDisabled=function(a){return l.okDisabled(a)},b.codeMirrorDefaultOptions=a.getCodeMirrorDefaultOptions(),b.isNewObject=null===h,b.object=null!=h?c.cloneDeep(h):{},b.fieldValueSelected=function(a,b){return l.onFieldValueSelected(a,b)},b.getValue=function(a){return a.type===d.RICH_TEXT&&b.readOnly(a).length>0?f.trustAsHtml(h[a.property]):h[a.property]},b.getHelpText=function(b){return a.onGetHelpText(b)},b.fieldVisible=function(a){return a.visibleFunction?a.visibleFunction(b.object):!0},b.readOnly=function(a){return a.readOnlyFunction?a.readOnlyFunction(b.object)?"readonly":"":a.readOnly?"readonly":""},b.submit=function(a){return l.onSubmit(a)},b.cancel=function(){return l.onCancel()},b.showDateTimeField=function(a,b){a.preventDefault(),a.stopPropagation(),b.isOpen=!0},this.initializeFields()}return a.prototype.okDisabled=function(a){return this.scope.isApplying||!c.isUndefined(a)&&a.$invalid},a.onGetHelpText=function(a){var b=a.helpText;return null==b&&(b=""),b},a.getCodeMirrorDefaultOptions=function(){return{mode:"text/html",lineNumbers:!0,lineWrapping:!0,indentWithTabs:!0,theme:"default",extraKeys:{F11:function(a){a.setOption("fullScreen",!a.getOption("fullScreen"))},Esc:function(a){a.getOption("fullScreen")&&a.setOption("fullScreen",!1)}}}},a.prototype.onFieldValueSelected=function(a,b){var c=this.scope.object[a.property];switch(a.type){case d.SELECT:return b.value==c;case d.MULTI_SELECT:if(!c)return!1;for(var e=0;e<c.length;e++)if(c[e]==b.value)return!0;return!1;default:return!1}},a.prototype.processField=function(a){switch(a.type){case d.DYNAMIC_FIELD_LIST:this.processDynamicFields(a);break;case d.HIDDEN:break;default:this.addField(a)}},a.prototype.processDynamicFields=function(a){var b=this,d=this.scope.object[a.property];c.isArray(d)&&c.forEach(d,function(d){var e=c.cloneDeep(d.field);e.property=a.property+"$"+e.property,e.dynamicSource=d,b.addField(e),b.scope.object[e.property]=d.value})},a.prototype.addField=function(a){if(a.type===d.PASSWORD_REPEAT){a=c.cloneDeep(a),a.type=d.PASSWORD,this.addSimpleField(a);var b=c.cloneDeep(a);b.property=a.property+f.PASSWORD_REPEAT_SUFFIX,b.inlineWithPrevious=!0,b.reference=a.property,b.type=d.PASSWORD_REPEAT,b.required=!1,this.addSimpleField(b)}else this.addSimpleField(a)},a.prototype.addSimpleField=function(a){this.scope.object.hasOwnProperty(a.property)||(c.isUndefined(a.defaultValue)?this.scope.object[a.property]="":this.scope.object[a.property]=a.defaultValue);var b=this.scope.fields;if(a.inlineWithPrevious&&0!==b.length){var e=b[b.length-1];if(e.isGroup)e.children.push(a);else{var f={};f.isGroup=!0,f.type="",f.children=[],f.children.push(e),f.children.push(a),f.position=e.position,b[b.length-1]=f}}else b.push(a);switch(a.type){case d.IMAGE:case d.FILE:this.scope.object[a.property]=null;break;case d.SELECT:if(c.isArray(a.selectValues)){var g=a.selectValues;g.length>0&&(this.scope.object[a.property]=g[0].value)}break;case d.DATE:a.isOpen=!1}if(c.isBoolean(a.visible)||c.isString(a.visible))if(c.isBoolean(a.visible)){var h=a.visible;a.visibleFunction=function(a){return h}}else a.visibleFunction=new Function("obj","with(obj) { return "+a.visible+"; }");else a.visibleFunction=null;if(c.isBoolean(a.readOnly)||c.isString(a.readOnly))if(c.isBoolean(a.readOnly)){var i=a.readOnly;a.readOnlyFunction=function(a){return i}}else a.readOnlyFunction=new Function("obj","with(obj) { return "+a.readOnly+"; }");else a.readOnlyFunction=null},a.prototype.initializeFields=function(){var a=this;this.scope.fields=[],c.forEach(this.definition.fields,function(b){a.processField(b)})},a.prototype.onCancel=function(){this.dialogService.hide("cancel")},a.prototype.onSubmit=function(a){var b=this;if(c.each(this.scope.fields,function(d){if(b.scope.fieldVisible(d)&&!b.scope.readOnly(d)){var f=a[d.property];c.isObject(f)&&f.$setDirty();var g=b.scope.object[d.property];e.validate(b.scope.object,g,d,b.scope.isNewObject,b.configuration,function(a){f.$setValidity(a,!1)})}}),!a.$invalid){c.each(this.scope.fields,function(a){a.dynamicSource&&(a.dynamicSource.value=b.scope.object[a.property])}),this.scope.submitWithCaptcha&&(this.scope.object["-RecaptchaChallenge-"]=Recaptcha.get_challenge(),this.scope.object["-RecaptchaResponse-"]=Recaptcha.get_response()),this.scope.submitError="",this.scope.isApplying=!0;try{var g=c.cloneDeep(this.scope.object);if(c.each(this.scope.fields,function(a){a.dynamicSource?delete g[a.property]:a.type==d.PASSWORD_REPEAT&&delete g[a.property+f.PASSWORD_REPEAT_SUFFIX]}),c.each(this.definition.fields,function(a){if(a.type==d.DYNAMIC_FIELD_LIST){var b=g[a.property];null!=b&&c.each(b,function(a){var b=a.field.property;a.field={},a.field.property=b})}}),null==this.resolver)return this.dialogService.hide(),void this.defer.resolve(g);this.resolver(g).then(function(){b.scope.isApplying=!1,b.dialogService.hide(),null!=b.defer&&b.defer.resolve(g)},function(a){b.scope.isApplying=!1,b.scope.submitError=a,b.scope.submitWithCaptcha&&Recaptcha.reload()})}catch(h){this.scope.isApplying=!1,this.scope.submitError=h.toString()}}},a}();return g.controller("inputForm",["$scope","$mdDialog","$sce","webFormsConfiguration","object","definition","defer","resolver",h]),h});var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};define("controllers/DialogController",["require","exports","controllers/InputFormController","modules/WebFormsModule","angular"],function(a,b,c,d){var e=function(a){function b(b,c,d,e,f){var g=this;a.call(this,b,c,d,e,b.configuration.object,b.definition,null,function(a){return g.successFunction(a)}),this.qService=f,this.dialogScope=b,b.submitError="",b.submitSuccess="",b.hasChanges=!1,b.changesApplied=!1,b.openForm=function(a){a.$setPristine(),b.changesApplied=!1,b.submitError="",b.submitSuccess=""},b.$watch("object",function(a,b){a!==b&&g.onDataChanged()},!0)}return __extends(b,a),b.prototype.okDisabled=function(b){return a.prototype.okDisabled.call(this,b)||!this.dialogScope.hasChanges},b.prototype.onDataChanged=function(){this.dialogScope.hasChanges=!0,this.dialogScope.submitError="",this.dialogScope.submitSuccess=""},b.prototype.successFunction=function(a){var b=this,c=this.qService.defer();return this.dialogScope.submit(a).then(function(a){b.dialogScope.hasChanges=!1,b.dialogScope.changesApplied=!0,b.dialogScope.submitSuccess=a.message,c.resolve()},function(a){return c.reject(a)}),c.promise},b}(c);return d.controller("dialog",["$scope","$mdDialog","$sce","webFormsConfiguration","commandProcessor","$q",e]),e}),define("controllers/InputFormMessageController",["require","exports","modules/WebFormsModule","angular"],function(a,b,c){var d=function(){function a(a,b,c,d,e){a.message=c,a.title=d,a.close=function(){b.hide(),e.resolve()}}return a}();c.controller("inputFormMessage",["$scope","$mdDialog","message","title","defer",d])}),define("controllers/InputFormQuestionController",["require","exports","modules/WebFormsModule","angular"],function(a,b,c){var d=function(){function a(a,b,c,d,e,f){a.message=c,a.title=d,a.submitError="",a.isApplying=!1,a.close=function(){null==f&&(b.hide(),e.resolve()),a.submitError="",a.isApplying=!0;var c=f();c.then(function(){b.hide(),a.isApplying=!1,e.resolve()},function(b){a.submitError=b,a.isApplying=!1})}}return a}();c.controller("inputFormQuestion",["$scope","$mdDialog","message","title","defer","resolver",d])}),define("directives/CkEditorDirective",["require","exports","lodash","modules/WebFormsModule","angular"],function(a,b,c,d){var e=function(){function a(){}return a}(),f=function(){function a(a,b,c,d,f,g,h){var i=this;this.smileIdToCode={},this.smileCodeToId={},this.configuration=f,this.options=new e,this.scope=a,this.friendlyFormatting=g,this.model=c,this.inputContainer=d,this.initializeSmiles(),d.setHasValue(!0),this.editor=h.appendTo(b[0],this.options),this.editor.on("change",function(){return i.applyChanges()}),this.editor.on("key",function(){return i.applyChanges()}),this.editor.on("focus",function(){return i.inputContainer.setFocused(!0)}),this.editor.on("blur",function(){return i.inputContainer.setFocused(!1)}),c.$render=function(){return i.render()}}return a.prototype.updateEditorState=function(a){this.inputContainer.setHasValue(!0),this.inputContainer.setInvalid(this.model.$invalid&&this.model.$touched)},a.prototype.render=function(){var a=this.model.$viewValue||"";a&&this.friendlyFormatting.getSmilesExpression()&&(a=this.friendlyFormatting.smilesToImg(a)),this.editor.setData(a),this.updateEditorState(a)},a.prototype.applyChanges=function(){var a=this;this.scope.$apply(function(){return a.setViewValue()})},a.prototype.setViewValue=function(){var a=this,b=this.editor.getData();null!=this.friendlyFormatting.getSmilesExpression()&&(b=b.replace(/<img\s+alt="([^"]*)"\s+src="[^"]*"\s+(?:style="[^"]*"\s+)?title="([^"]*)"\s+\/?>/gi,function(b,c,d){return c&&d&&c==d&&a.smileCodeToId.hasOwnProperty(c)?c:b})),this.model.$setViewValue(b),this.model.$setTouched(),this.updateEditorState(b)},a.prototype.initializeSmiles=function(){var a=this;this.configuration.smilesBase&&0!==this.configuration.smilesBase.length&&this.configuration.smiles&&0!==this.configuration.smiles.length&&(this.options.smiley_path=this.configuration.smilesBase,this.options.smiley_descriptions=[],this.options.smiley_images=[],c.forEach(this.configuration.smiles,function(b){a.smileCodeToId[b.code]=b.id,a.smileIdToCode[b.id]=b.code,a.options.smiley_descriptions.push(b.code),a.options.smiley_images.push(b.id)}))},a}();d.directive("ckEditor",["webFormsConfiguration","friendlyFormatting",function(b,c){return{require:["?ngModel","^?mdInputContainer"],restrict:"AE",replace:!1,scope:{options:"=",readonly:"="},link:function(d,e,g,h){a(["ckeditor"],function(a){return new f(d,e,h[0],h[1],b,c,a)})}}}])}),define("views/codemirror",[],function(){return'<div class="md-input CodeMirrorInput"></div>'}),define("directives/CodeMirrorDirective",["require","exports","views/codemirror","modules/WebFormsModule","angular"],function(a,b,c,d){var e=function(){function a(a,b,c,d,e,f){var g=this;this.scope=a,this.model=d,this.inputContainer=f,_.isUndefined(a.options)&&(a.options={});var h=this.model.$viewValue||"";a.options.lineNumbers=!0,a.options.mode="htmlmixed",a.options.inputStyle="textarea",a.options.value=h,this.editor=this.createEditor(b,a.options,e),this.configOptionsWatcher(c.uiCodemirror||c.uiCodemirrorOpts),this.configNgModelLink(),this.configUiRefreshAttribute(c.uiRefresh),a.$on("CodeMirror",function(a,b){if(!_.isFunction(b))throw new Error("the CodeMirror event requires a callback function");b(g.editor)}),this.updateEditorState(h)}return a.prototype.createEditor=function(a,b,c){return new c(function(b){a.append(b)},b)},a.prototype.configOptionsWatcher=function(a){var b=this;if(a){var c=Object.keys(CodeMirror.CodeMirror.defaults);this.scope.$watch("options",function(a,d){_.isObject(a)&&c.forEach(function(c){if(a.hasOwnProperty(c)){if(d&&a[c]===d[c])return;b.editor.setOption(c,a[c])}})},!0)}},a.prototype.updateEditorState=function(a){this.inputContainer.setHasValue(!_.isEmpty(a)),this.inputContainer.setInvalid(this.model.$invalid&&this.model.$touched)},a.prototype.configNgModelLink=function(){var a=this;this.model&&(this.model.$formatters.push(function(a){if(angular.isUndefined(a)||null===a)return"";if(angular.isObject(a)||angular.isArray(a))throw new Error("ui-codemirror cannot use an object or an array as a model");return a}),this.model.$render=function(){var b=a.model.$viewValue||"";a.editor.setValue(b),a.updateEditorState(b)},this.editor.on("change",function(b){var c=b.getValue();c!==a.model.$viewValue&&a.scope.$evalAsync(function(){a.model.$setViewValue(c),a.model.$setTouched(),a.updateEditorState(c)})}),this.editor.on("focus",function(){a.inputContainer.setFocused(!0)}),this.editor.on("blur",function(){a.inputContainer.setFocused(!1)}))},a.prototype.configUiRefreshAttribute=function(a){var b=this;a&&this.scope.$watch(a,function(a,c){a!==c&&b.scope.$evalAsync(function(){b.editor.refresh()})})},a}();d.directive("uiCodemirror",["webFormsConfiguration",function(b){return{restrict:"E",template:c,replace:!0,require:["?ngModel","^?mdInputContainer"],scope:{options:"=",readonly:"="},link:function(c,d,f,g){var h=["codemirror"];b.codeMirrorModules&&b.codeMirrorModules.length&&(h=_.union(h,b.codeMirrorModules)),a(h,function(a){new e(c,d,f,g[0],a,g[1])})}}}])}),define("views/webDialog",[],function(){return'<div ng-form="form"><div ng-if="!changesApplied"><md-content layout-padding="layout-padding" layout="column"><style>md-input-container.inputfield-file label {    flex: none;    -webkit-flex: none;    transform: none !important;}</style><div ng-repeat="field in fields | orderBy: \'position\'"><input-field field="field" object="object" form="form" ng-if="fieldVisible(field) &amp;&amp; !field.isGroup"></input-field><div ng-if="field.isGroup" layout="row" layout-sm="column"><input-field ng-repeat="child in field.children" field="child" object="object" form="form" ng-if="fieldVisible(child)" flex=""></input-field></div></div><div ng-if="submitWithCaptcha" captcha="recaptchaPublicKey"></div><div ng-if="submitError.length &gt; 0" class="bg-danger dialog-notification"><span class="glyphicon glyphicon-exclamation-sign"></span><span ng-bind="submitError"></span></div><div ng-if="submitSuccess.length &gt; 0" class="bg-success dialog-notification"><span class="glyphicon glyphicon-ok-circle"></span><span ng-bind="submitSuccess"></span></div></md-content><md-content layout-padding="layout-padding"><md-button ng-click="submit(form)" ng-disabled="okDisabled(form)" class="md-raised md-primary"><span ng-bind="applyCaption | translate"></span><md-progress-circular ng-show="isApplying" md-mode="indeterminate" md-diameter="10"></md-progress-circular></md-button></md-content></div><div ng-if="changesApplied"><div ng-bind="submitSuccess" class="bg-success dialog-notification"></div><md-content layout-padding="layout-padding"><md-button ng-click="openForm(form)" ng-bind="\'Open Form\' | translate" aria-label="Open" class="md-raised"></md-button></md-content></div></div>'}),define("directives/DialogDirective",["require","exports","views/webDialog","modules/WebFormsModule","controllers/DialogController","angular"],function(a,b,c,d,e){d.directive("lmDialog",[function(){return{template:c,restrict:"E",replace:!1,scope:{configuration:"="},controller:e}}])}),define("views/fileRead",[],function(){return'<input type="file" style="display: none"/><md-button ng-click="chooseFile()">{{ configuration.chooseFileMessage | translate }}</md-button><md-button ng-click="clear()" ng-show="valueSet">{{ configuration.clearFileMessage | translate }}</md-button><span>{{comment}}</span>'}),define("directives/FileReadDirective",["require","exports","modules/WebFormsModule","views/fileRead","angular"],function(a,b,c,d){var e=function(){function a(a,b,c,d,e){var f=this;this.scope=a,this.scope.comment="",this.scope.configuration=c,this.model=d,this.container=e,this.scope.valueSet=_.isObject(this.model.$modelValue);var g=b.find("input[type=file]");a.chooseFile=function(){g.click()},a.clear=function(){g.val(""),g.html(""),f.model.$setViewValue(null),f.scope.comment="",f.container.setHasValue(!1),f.scope.valueSet=!1},g.bind("change",function(a){return f.onFileSelected(a)})}return a.prototype.onFileSelected=function(a){var b=this;if(0!==a.target.files.length){var c=a.target.files[0];this.scope.comment=c.name;var d=new FileReader;d.onload=function(c){b.scope.$apply(function(){return b.onReadFinished(c,a)})},d.readAsDataURL(c)}},a.prototype.onReadFinished=function(a,b){var c=a.target.result,d=c.indexOf("base64,");d>0&&(c=c.substring(d+7));var e=b.target.files[0];this.container.setHasValue(!0),this.model.$setViewValue({file:c,type:e.type,name:e.name,id:null}),this.model.$setDirty(),this.model.$setTouched(),this.scope.valueSet=!0},a}();c.directive("fileRead",["webFormsConfiguration",function(a){return{template:d,restrict:"E",replace:!1,require:["?ngModel","^?mdInputContainer"],scope:!0,link:function(b,c,d,f){new e(b,c,a,f[0],f[1])}}}])}),define("directives/InputFieldDirective",["require","exports","datatypes/InputFieldTypes","lodash","modules/WebFormsModule"],function(a,b,c,d,e){function f(a){switch(a){case c.TEXT:return"text";case c.CODE_TEXT:return"codeText";case c.BOOLEAN:return"checkBox";case c.DATE:return"date";case c.EMAIL:return"email";case c.FILE:return"file";case c.FILE_LIST:return"fileList";case c.IMAGE:return"image";case c.LABEL:return"label";case c.MULTILINE_TEXT:return"multilineText";case c.MULTI_SELECT:return"multiSelect";case c.NUMBER:return"number";case c.PASSWORD:return"password";case c.PASSWORD_REPEAT:return"passwordRepeat";case c.RICH_TEXT:return"richText";case c.SELECT:return"select";case c.TYPEAHEAD:return"typeahead"}}var g=function(){function b(a,b,c,d){var e=this;this.scope=a,this.scope.configuration=d,this.element=b,this.compileService=c,this.configuration=d,a.$watch("field",function(){return e.render()})}return b.prototype.getTemplateUrl=function(){return"../views/inputFields/"+f(this.scope.field.type.toLowerCase())},b.prototype.render=function(){var b=this;a([this.getTemplateUrl()],function(a){b.onContentLoaded(a)})},b.prototype.onContentLoaded=function(a){if(this.element.contents().remove(),d.isObject(this.scope.field)){a="<md-input-container class='inputfield-"+this.scope.field.type+"'>"+a+"<input-field-error></input-field-error></md-input-container>";var b=angular.element(a).appendTo(this.element);this.compileService(b)(this.scope)}},b}();e.directive("inputField",["$compile","webFormsConfiguration",function(a,b){return{restrict:"EA",require:["^form"],scope:{field:"=",object:"=",form:"="},link:function(c,d){new g(c,d,a,b)}}}])}),define("utilities/StringFormatter",["require","exports","lodash"],function(a,b,c){var d=function(){function a(){}return a.format=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];return a.replace(/{(\d+)}/g,function(a,d){return c.isUndefined(b[d])?a:b[d]})},a}();return d}),define("views/inputFieldError",[],function(){return'<div ng-messages="form[field.property].$error" ng-show="form[field.property].$dirty"><div ng-message="required">{{ configuration.requiredErrorMessage | translate }}</div><div ng-message="maxlength">{{ maxLengthMessage }}</div><div ng-message="minlength">{{ minLengthMessage }}</div><div ng-message="email">{{ configuration.emailErrorMessage | translate }}</div><div ng-message="url">{{ configuration.urlErrorMessage | translate }}</div><div ng-message="pattern">{{ configuration.patternErrorMessage | translate }}</div><div ng-message="date">{{ configuration.dateErrorMessage | translate }}</div><div ng-message="time">{{ configuration.timeErrorMessage | translate }}</div><div ng-message="number">{{ configuration.numberErrorMessage | translate }}</div><div ng-message="password_match">{{ configuration.passwordErrorMessage | translate }}</div><div ng-message="equals">{{ configuration.notEqualErrorMessage | translate }}</div></div>'}),define("directives/InputFieldErrorDirective",["require","exports","utilities/StringFormatter","modules/WebFormsModule","views/inputFieldError"],function(a,b,c,d,e){var f=function(){function a(a,b,d){a.configuration=d,a.maxLengthMessage="",a.field.maxLength&&b(d.maxLengthErrorMessage).then(function(b){return a.maxLengthMessage=c.format(b,a.field.maxLength)}),a.minLengthMessage="",a.field.minLength&&b(d.minLengthErrorMessage).then(function(b){return a.minLengthMessage=c.format(b,a.field.minLength)})}return a}();d.directive("inputFieldError",[function(){return{template:e,restrict:"E",replace:!0,controller:["$scope","$translate","webFormsConfiguration",f]}}])}),define("views/multiFileRead",[],function(){return'<ul class="file-choose-list"><li ng-foreach="file in value.files"><span>{{file.name}}</span><span ng-click="removeFile(file)" class="file-remove glyphicon glyphicon-remove"></span></li></ul><input type="file" style="display: none" multiple="multiple"/><md-button>{{ \'Main.ChooseFile\' | translate }}</md-button>'}),define("datatypes/FileReadResponse",function(){}),define("directives/MultiFileReadDirective",["require","exports","modules/WebFormsModule","views/multiFileRead","../datatypes/FileReadResponse","angular"],function(a,b,c,d){var e=function(){function a(){}return a}(),f=function(){function a(a,b){var c=this;this.fileId=1,this.scope=a,null==a.value?(a.value=new e,this.fileReadBefore=0):this.fileReadBefore=a.value.files.length,a.value.files=[],this.fileElement=b.find("file"),a.chooseFile=function(){return c.fileElement.click()},this.fileElement.bind("change",function(a){return c.onFilesSelected(a)}),a.removeFile=function(b){for(var c=0;c<a.value.files.length;c++)if(a.value.files[c].id==b.id){a.value.files.splice(c,1);break}}}return a.prototype.onFilesSelected=function(a){for(var b=a.target.files,c=0;c<b.length;c++){var d=b[c];this.readFile(d,a,b)}},a.prototype.onReadFinished=function(a,b,c){var d=a.target.result,e=d.indexOf("base64,");e>0&&(d=d.substring(e+7));var f={file:d,type:b.type,name:b.name,id:this.fileId++};this.scope.value.files.push(f),this.scope.value.files.length-this.fileReadBefore==c.length&&this.fileElement.val("")},a.prototype.readFile=function(a,b,c){var d=this,e=new FileReader;e.onload=function(){d.scope.$apply(function(){return d.onReadFinished(b,a,c)})},e.readAsDataURL(a)},a}();c.directive("multiFileRead",[function(){return{template:d,restrict:"E",replace:!1,scope:{value:"="},link:f}}])}),define("directives/ValidateEqualsDirective",["require","exports","lodash","modules/WebFormsModule"],function(a,b,c,d){var e=function(){function a(a,b,c){var d=this;this.model=c,this.attrs=b,a.$watch(b.ngModel,function(){return d.validate()}),b.$observe("reference",function(){return d.validate()})}return a.prototype.validate=function(){var a=this.model.$viewValue,b=this.attrs.reference;this.model.$setValidity("equals",c.isEqual(a,b))},a}();d.directive("validateEquals",[function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){new e(a,c,d)}}}])}),define("services/FriendlyFormattingService",["require","exports","autolinker","modules/WebFormsModule","angular"],function(a,b,c,d){var e=function(){function a(a){this.smiles={},this.smilesString="",this.smilesBase=a.smilesBase,this.autoLinker=new c,this.autoLinker.newWindow=!1,this.autoLinker.truncate=30;for(var b=0;b<a.smiles.length;b++){var d=a.smiles[b];this.smiles[d.code]=d.id,this.smilesString.length>0&&(this.smilesString+="|");for(var e=0;e<d.code.length;e++){switch(d.code[e]){case"(":case")":case"[":case"]":case"-":case"?":case"|":this.smilesString+="\\"}this.smilesString+=d.code[e]}}this.smilesString.length>0?this.smilesExpression=new RegExp(this.smilesString,"g"):this.smilesExpression=null}return a.prototype.getSmilesExpression=function(){return this.smilesExpression},a.prototype.getSmileUrl=function(a){return a.length&&this.smilesBase?'<img alt="'+a+'" src="'+this.smilesBase+this.smiles[a]+'" title="'+a+'" />':""},a.prototype.smilesToImg=function(a){return null!=this.smilesExpression&&(a=a.replace(/([^<>]*)(<[^<>]*>)/gi,function(a,b,c){return b&&0!=b.length?(b=b.replace(this.smilesExpression,this.getSmileUrl),c?b+c:b):a})),a},a.prototype.getFriendlyHtml=function(a){return null==a||0==a.length?a:(a=this.smilesToImg(a),this.autoLinker.link(a))},a}();return d.service("friendlyFormatting",["webFormsConfiguration",e]),e}),define("views/webForm",[],function(){return'<md-dialog ng-form="form" aria-label="{{title}}" flex="80"><md-toolbar><div class="md-toolbar-tools"><h2>{{title}}</h2></div></md-toolbar><md-content layout-padding="layout-padding" layout="column"><style>md-input-container.inputfield-file label {    flex: none;    -webkit-flex: none;    transform: none !important;}</style><div ng-repeat="field in fields | orderBy: \'position\'"><input-field field="field" object="object" form="form" ng-if="fieldVisible(field) &amp;&amp; !field.isGroup"></input-field><div ng-if="field.isGroup" layout="row" layout-sm="column"><input-field ng-repeat="child in field.children" field="child" object="object" form="form" ng-if="fieldVisible(child)" flex=""></input-field></div></div><div ng-if="submitWithCaptcha" captcha="recaptchaPublicKey"></div><div ng-if="submitError.length &gt; 0" class="bg-danger dialog-notification"><span class="glyphicon glyphicon-exclamation-sign"></span><span ng-bind="submitError"></span></div><div ng-if="submitSuccess.length &gt; 0" class="bg-success dialog-notification"><span class="glyphicon glyphicon-ok-circle"></span><span ng-bind="submitSuccess"></span></div></md-content><div class="md-actions"><md-button ng-click="submit(form)" aria-label="OK" class="md-raised md-primary"><span>{{ \'OK\' | translate }}</span><md-progress-circular ng-show="isApplying" md-mode="indeterminate" md-diameter="10"></md-progress-circular></md-button><md-button ng-click="cancel()" ng-disabled="isApplying" class="md-raised">{{ \'Cancel\' | translate }}</md-button></div></md-dialog>'}),define("views/webFormQuestion",[],function(){return'<div class="modal-header"><h3 class="modal-title">{{title}}</h3></div><div class="modal-body"><p>{{message}}</p></div><div class="modal-footer"><div ng-if="submitError.length &gt; 0" class="bg-danger dialog-notification"><span class="glyphicon glyphicon-exclamation-sign"></span><span ng-bind="submitError"></span></div><md-button ng-click="submit()" class="md-raised"><span>{{ \'Main.ButtonYes\' | translate }}</span><md-progress-circular ng-show="isApplying" md-mode="indeterminate"></md-progress-circular></md-button><md-button ng-click="cancel()" class="md-raised md-warn">{{ \'Main.ButtonNo\' | translate }}</md-button></div>'}),define("views/webFormMessage",[],function(){return'<md-dialog aria-label="{{title}}" class="input-form"><md-dialog-content><md-subheader>{{title}}</md-subheader></md-dialog-content><md-content><p>{{message}}</p></md-content><div class="md-actions"><md-button ng-click="close()" class="md-primary">{{ \'Main.ButtonOk\' | translate }}</md-button></div></md-dialog>'}),define("services/WebFormsService",["require","exports","views/webForm","views/webFormQuestion","views/webFormMessage","datatypes/InputFieldTypes","angular"],function(a,b,c,d,e,f){var g=function(){function b(a,b,c,d){this.httpService=a,this.qService=b,this.cache=c("lm-webforms"),this.dialogService=d}return b.prototype.newObject=function(a,b,c){return void 0===b&&(b=null),void 0===c&&(c=null),this.getTemplateAndExecute(a,b,!0,c)},b.prototype.editObject=function(a,b,c){return void 0===c&&(c=null),this.getTemplateAndExecute(a,b,!1,c)},b.prototype.question=function(a,b,c){void 0===c&&(c=null);var e=this.qService.defer();return this.dialogService.show({template:d,locals:{message:a,title:b,defer:e,resolver:c},controller:"inputFormQuestion"})["catch"](function(){e.reject()}),e.promise},b.prototype.message=function(a,b){void 0===b&&(b=null);var c=this.qService.defer();return this.dialogService.show({template:e,locals:{message:a,title:b,defer:c},controller:"inputFormMessage"}),c.promise},b.prototype.getTemplateAndExecute=function(a,b,c,d){var e=this;void 0===d&&(d=null);var f=this.qService.defer();return this.httpService.get(a+".json",{cache:this.cache}).then(function(a){e.executeWithDefinitionLoaded(b,a.data,c,f,d)},function(a){return f.reject(a)}),f.promise},b.fillRichTextModules=function(a){a.push("../directives/CkEditorDirective")},b.fillCodeTextModules=function(a){a.push("../directives/CodeMirrorDirective")},b.prototype.executeWithDefinitionLoaded=function(c,d,e,g,h){var i=this,j=!1,k=!1,l=!1;_.forOwn(d.fields,function(a,b){a.property=b});var m=[];_.forEach(d.fields,function(a){switch(a.type){case f.DYNAMIC_FIELD_LIST:l=!0;break;case f.RICH_TEXT:j||(j=!0,b.fillRichTextModules(m));break;case f.CODE_TEXT:k||(k=!0,b.fillCodeTextModules(m))}}),l&&null==c&&g.reject("Cannot edit uninitialized object"),m.length>0?a(m,function(){i.executeWithDefinitionAndModulesLoaded(c,d,e,g,h)}):this.executeWithDefinitionAndModulesLoaded(c,d,e,g,h)},b.prototype.executeWithDefinitionAndModulesLoaded=function(a,b,d,e,f){void 0===f&&(f=null),this.dialogService.show({template:c,locals:{object:a,definition:b,defer:e,resolver:f,isNew:d},controller:"inputForm"})["catch"](function(){e.reject("Cancelled")})},b}();return g}),define("datatypes/WebFormsConfiguration",["require","exports"],function(a,b){var c=function(){function a(){this.codeMirrorModules=[],this.smilesBase=null,this.smiles=[],this.maximumFileSize=0,this.requiredErrorMessage="This field is mandatory",this.notEqualErrorMessage="Fields are not equal",this.maxLengthErrorMessage="This field has to be less than {0} characters long",this.minLengthErrorMessage="This field has to be greater than {0} characters long",this.emailErrorMessage="Wrong e-mail address",this.dateErrorMessage="Wrong date",this.timeErrorMessage="Wrong time",this.numberErrorMessage="Wrong number",this.patternErrorMessage="The field doesn't match the pattern specified",this.urlErrorMessage="Wrong URL",this.passwordErrorMessage="Wrong password",this.chooseFileMessage="Choose File",this.clearFileMessage="Clear"}return a}();return c}),define("services/WebFormsServiceProvider",["require","exports","modules/WebFormsModule","services/WebFormsService","datatypes/WebFormsConfiguration","angular"],function(a,b,c,d,e){var f=new e;c.value("webFormsConfiguration",f);var g=function(){function a(){this.$get=["$http","$q","$cacheFactory","$mdDialog",function(a,b,c,e){
return new d(a,b,c,e)}]}return a}();c.provider("webForms",[g])}),define("views/inputFields/checkBox",[],function(){return'<md-checkbox name="{{field.property}}" ng-model="object[field.property]" ng-disabled="readOnly(field)">{{field.title | translate}}</md-checkbox>'}),define("views/inputFields/codeText",[],function(){return'<style>.CodeMirror {    line-height: normal;    height: 200px;}.CodeMirrorInput {    border-width: 1px !important;    border-style: solid;    border-radius: 3px;}.md-input-focused .CodeMirrorInput {    border-width: 2px !important;}md-input-container:not(.md-input-focused):not(.md-input-has-value) .CodeMirrorLabel {    padding-left: 40px;}</style><label class="CodeMirrorLabel">{{field.title | translate}}</label><link href="../../bower_components/codemirror/lib/codemirror.css" rel="stylesheet" type="text/css"/><ui-codemirror ng-model="object[field.property]" name="{{field.property}}" ng-required="field.required" readonly="readOnly(field)" options="{}"></ui-codemirror>'}),define("views/inputFields/date",[],function(){return'<label>{{field.title | translate}}</label><input type="date" name="{{field.property}}" ng-model="object[field.property]" ng-readonly="readonly(field)" ng-required="field.required"/>'}),define("views/inputFields/email",[],function(){return'<label>{{field.title | translate}}</label><input type="email" name="{{field.property}}" ng-model="object[field.property]" ng-readonly="readOnly(field)" ng-required="field.required" ng-minlength="field.minLength" ng-maxlength="field.maxLength"/>'}),define("views/inputFields/file",[],function(){return'<label>{{field.title | translate}}</label><style>md-input-container file-read.md-input {    border-width: 0;}md-input-container file-read.md-input.ng-invalid.ng-dirty {    border-width: 2px;    border-style: solid;}md-input-container.md-input-focused file-read.md-input {    border-width: 2px;    border-style: solid;}</style><file-read ng-model="object[field.property]" style="height: auto" ng-required="field.required" name="{{field.property}}" class="md-input"></file-read>'}),define("views/inputFields/fileList",[],function(){return'<label>{{field.title | translate}}</label><div multi-file-read="object[field.property]"></div>'}),define("views/inputFields/image",[],function(){return'<label>{{field.title | translate}}</label><div><div><input ng-if="!readOnly(field)" type="file" fileread="object[field.property]"/></div><div style="margin-top: 1em;"><img ng-if="object[field.property] != null" ng-src="/Image/Thumbnail/{{object[field.property]}}"/></div></div>'}),define("views/inputFields/label",[],function(){return'<label>{{field.title | translate}}</label><span ng-bind="object[field.property]"></span>'}),define("views/inputFields/multilineText",[],function(){return'<label>{{field.title | translate}}</label><textarea ng-model="object[field.property]" ng-readonly="readOnly(field)"></textarea>'}),define("views/inputFields/multiSelect",[],function(){return'<label>{{field.title | translate}}</label><select ng-model="object[field.property]" multiple="multiple" ng-options="item.value as item.text for item in field.selectValues"></select>'}),define("views/inputFields/number",[],function(){return'<label>{{field.title | translate}}</label><input type="number" ng-model="object[field.property]" ng-readonly="readOnly(field)" ng-required="required"/>'}),define("views/inputFields/password",[],function(){return'<label>{{field.title | translate}}</label><input type="password" name="{{field.property}}" ng-model="object[field.property]" ng-readonly="readOnly(field)" ng-required="field.required" ng-minlength="field.minLength" ng-maxlength="field.maxLength"/>'}),define("views/inputFields/passwordRepeat",[],function(){return'<label>{{field.title | translate}}</label><input type="password" name="{{field.property}}" ng-model="object[field.property]" ng-readonly="readOnly(field)" ng-required="field.required" ng-minlength="field.minLength" ng-maxlength="field.maxLength" validate-equals="" reference="{{object[field.reference]}}"/>'}),define("views/inputFields/richText",[],function(){return'<label>{{field.title | translate}}</label><style>md-input-container ck-editor.md-input {    border-width: 0;}md-input-container ck-editor.md-input.ng-invalid.ng-dirty {    border-width: 2px;    border-style: solid;}md-input-container.md-input-focused ck-editor.md-input {    border-width: 2px;    border-style: solid;}</style><ck-editor ng-if="!readOnly(field)" ng-model="object[field.property]" options="{}" readonly="false" ng-required="field.required" name="{{field.property}}" class="md-input"></ck-editor><div ng-if="readOnly(field)" ng-bind-html="object[field.property]"></div>'}),define("views/inputFields/select",[],function(){return'<label>{{field.title | translate}}</label><select ng-model="object[field.property]" class="form-control"><option ng-repeat="select in field.selectValues" value="{{select.value}}" ng-bind="select.text" ng-selected="fieldValueSelected(model, field, select)"></option></select>'}),define("views/inputFields/text",[],function(){return'<label>{{field.title | translate}}</label><input type="text" name="{{field.property}}" ng-model="object[field.property]" ng-readonly="readOnly(field)" ng-required="field.required" ng-minlength="field.minLength" ng-maxlength="field.maxLength"/>'}),define("views/inputFields/typeahead",[],function(){return'<label>{{field.title | translate}}</label><input type="text" ng-model="object[field.property]" ng-readonly="readOnly(field)" typeahead="name for name in getTypeahead(field, $viewValue)"/>'}),define("lm-webforms",["require","exports","angular","controllers/DialogController","controllers/InputFormController","controllers/InputFormMessageController","controllers/InputFormQuestionController","directives/CkEditorDirective","directives/CodeMirrorDirective","directives/DialogDirective","directives/FileReadDirective","directives/InputFieldDirective","directives/InputFieldErrorDirective","directives/MultiFileReadDirective","directives/ValidateEqualsDirective","services/FriendlyFormattingService","services/WebFormsServiceProvider","views/inputFields/checkBox","views/inputFields/codeText","views/inputFields/date","views/inputFields/email","views/inputFields/file","views/inputFields/fileList","views/inputFields/image","views/inputFields/label","views/inputFields/multilineText","views/inputFields/multiSelect","views/inputFields/number","views/inputFields/password","views/inputFields/passwordRepeat","views/inputFields/richText","views/inputFields/select","views/inputFields/text","views/inputFields/typeahead"],function(a,b){});